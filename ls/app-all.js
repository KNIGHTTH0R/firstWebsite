var CryptoJS=CryptoJS||function(e,t){var i={},n=i.lib={},o=function(){},a=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=a.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;e>o;o++)t[n+o>>>2]|=(i[o>>>2]>>>24-8*(o%4)&255)<<24-8*((n+o)%4);else if(65535<i.length)for(o=0;e>o;o+=4)t[n+o>>>2]=i[o>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;t>n;n+=4)i.push(4294967296*e.random()|0);return new r.init(i,t)}}),s=i.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++){var o=t[n>>>2]>>>24-8*(n%4)&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new r.init(i,t/2)}},l=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-8*(n%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new r.init(i,t)}},d=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},p=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,o=i.sigBytes,a=this.blockSize,s=o/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*a,o=e.min(4*t,o),t){for(var c=0;t>c;c+=a)this._doProcessBlock(n,c);c=n.splice(0,t),i.sigBytes-=o}return new r.init(c,o)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=p.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}});var u=i.algo={};return i}(Math);!function(e){function t(e,t,i,n,o,a,r){return e=e+(t&i|~t&n)+o+r,(e<<a|e>>>32-a)+t}function i(e,t,i,n,o,a,r){return e=e+(t&n|i&~n)+o+r,(e<<a|e>>>32-a)+t}function n(e,t,i,n,o,a,r){return e=e+(t^i^n)+o+r,(e<<a|e>>>32-a)+t}function o(e,t,i,n,o,a,r){return e=e+(i^(t|~n))+o+r,(e<<a|e>>>32-a)+t}for(var a=CryptoJS,r=a.lib,s=r.WordArray,c=r.Hasher,r=a.algo,l=[],d=0;64>d;d++)l[d]=4294967296*e.abs(e.sin(d+1))|0;r=r.MD5=c.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var r=0;16>r;r++){var s=a+r,c=e[s];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var r=this._hash.words,s=e[a+0],c=e[a+1],d=e[a+2],p=e[a+3],u=e[a+4],f=e[a+5],h=e[a+6],g=e[a+7],m=e[a+8],v=e[a+9],w=e[a+10],y=e[a+11],_=e[a+12],b=e[a+13],x=e[a+14],k=e[a+15],S=r[0],j=r[1],C=r[2],z=r[3],S=t(S,j,C,z,s,7,l[0]),z=t(z,S,j,C,c,12,l[1]),C=t(C,z,S,j,d,17,l[2]),j=t(j,C,z,S,p,22,l[3]),S=t(S,j,C,z,u,7,l[4]),z=t(z,S,j,C,f,12,l[5]),C=t(C,z,S,j,h,17,l[6]),j=t(j,C,z,S,g,22,l[7]),S=t(S,j,C,z,m,7,l[8]),z=t(z,S,j,C,v,12,l[9]),C=t(C,z,S,j,w,17,l[10]),j=t(j,C,z,S,y,22,l[11]),S=t(S,j,C,z,_,7,l[12]),z=t(z,S,j,C,b,12,l[13]),C=t(C,z,S,j,x,17,l[14]),j=t(j,C,z,S,k,22,l[15]),S=i(S,j,C,z,c,5,l[16]),z=i(z,S,j,C,h,9,l[17]),C=i(C,z,S,j,y,14,l[18]),j=i(j,C,z,S,s,20,l[19]),S=i(S,j,C,z,f,5,l[20]),z=i(z,S,j,C,w,9,l[21]),C=i(C,z,S,j,k,14,l[22]),j=i(j,C,z,S,u,20,l[23]),S=i(S,j,C,z,v,5,l[24]),z=i(z,S,j,C,x,9,l[25]),C=i(C,z,S,j,p,14,l[26]),j=i(j,C,z,S,m,20,l[27]),S=i(S,j,C,z,b,5,l[28]),z=i(z,S,j,C,d,9,l[29]),C=i(C,z,S,j,g,14,l[30]),j=i(j,C,z,S,_,20,l[31]),S=n(S,j,C,z,f,4,l[32]),z=n(z,S,j,C,m,11,l[33]),C=n(C,z,S,j,y,16,l[34]),j=n(j,C,z,S,x,23,l[35]),S=n(S,j,C,z,c,4,l[36]),z=n(z,S,j,C,u,11,l[37]),C=n(C,z,S,j,g,16,l[38]),j=n(j,C,z,S,w,23,l[39]),S=n(S,j,C,z,b,4,l[40]),z=n(z,S,j,C,s,11,l[41]),C=n(C,z,S,j,p,16,l[42]),j=n(j,C,z,S,h,23,l[43]),S=n(S,j,C,z,v,4,l[44]),z=n(z,S,j,C,_,11,l[45]),C=n(C,z,S,j,k,16,l[46]),j=n(j,C,z,S,d,23,l[47]),S=o(S,j,C,z,s,6,l[48]),z=o(z,S,j,C,g,10,l[49]),C=o(C,z,S,j,x,15,l[50]),j=o(j,C,z,S,f,21,l[51]),S=o(S,j,C,z,_,6,l[52]),z=o(z,S,j,C,p,10,l[53]),C=o(C,z,S,j,w,15,l[54]),j=o(j,C,z,S,c,21,l[55]),S=o(S,j,C,z,m,6,l[56]),z=o(z,S,j,C,k,10,l[57]),C=o(C,z,S,j,h,15,l[58]),j=o(j,C,z,S,b,21,l[59]),S=o(S,j,C,z,u,6,l[60]),z=o(z,S,j,C,y,10,l[61]),C=o(C,z,S,j,d,15,l[62]),j=o(j,C,z,S,v,21,l[63]);r[0]=r[0]+S|0,r[1]=r[1]+j|0,r[2]=r[2]+C|0,r[3]=r[3]+z|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;i[o>>>5]|=128<<24-o%32;var a=e.floor(n/4294967296);for(i[(o+64>>>9<<4)+15]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[(o+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),t=this._hash,i=t.words,n=0;4>n;n++)o=i[n],i[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=c._createHelper(r),a.HmacMD5=c._createHmacHelper(r)}(Math);var CryptoJS=CryptoJS||function(e,t){var i={},n=i.lib={},o=function(){},a=n.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},r=n.WordArray=a.extend({init:function(e,i){e=this.words=e||[],this.sigBytes=i!=t?i:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var o=0;e>o;o++)t[n+o>>>2]|=(i[o>>>2]>>>24-8*(o%4)&255)<<24-8*((n+o)%4);else if(65535<i.length)for(o=0;e>o;o+=4)t[n+o>>>2]=i[o>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-8*(i%4),t.length=e.ceil(i/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],n=0;t>n;n+=4)i.push(4294967296*e.random()|0);return new r.init(i,t)}}),s=i.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++){var o=t[n>>>2]>>>24-8*(n%4)&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-4*(n%8);return new r.init(i,t/2)}},l=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;e>n;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-8*(n%4)&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;t>n;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-8*(n%4);return new r.init(i,t)}},d=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},p=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,n=i.words,o=i.sigBytes,a=this.blockSize,s=o/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*a,o=e.min(4*t,o),t){for(var c=0;t>c;c+=a)this._doProcessBlock(n,c);c=n.splice(0,t),i.sigBytes-=o}return new r.init(c,o)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=p.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new u.HMAC.init(e,i).finalize(t)}}});var u=i.algo={};return i}(Math);!function(e){function t(e,t,i,n,o,a,r){return e=e+(t&i|~t&n)+o+r,(e<<a|e>>>32-a)+t}function i(e,t,i,n,o,a,r){return e=e+(t&n|i&~n)+o+r,(e<<a|e>>>32-a)+t}function n(e,t,i,n,o,a,r){return e=e+(t^i^n)+o+r,(e<<a|e>>>32-a)+t}function o(e,t,i,n,o,a,r){return e=e+(i^(t|~n))+o+r,(e<<a|e>>>32-a)+t}for(var a=CryptoJS,r=a.lib,s=r.WordArray,c=r.Hasher,r=a.algo,l=[],d=0;64>d;d++)l[d]=4294967296*e.abs(e.sin(d+1))|0;r=r.MD5=c.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var r=0;16>r;r++){var s=a+r,c=e[s];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var r=this._hash.words,s=e[a+0],c=e[a+1],d=e[a+2],p=e[a+3],u=e[a+4],f=e[a+5],h=e[a+6],g=e[a+7],m=e[a+8],v=e[a+9],w=e[a+10],y=e[a+11],_=e[a+12],b=e[a+13],x=e[a+14],k=e[a+15],S=r[0],j=r[1],C=r[2],z=r[3],S=t(S,j,C,z,s,7,l[0]),z=t(z,S,j,C,c,12,l[1]),C=t(C,z,S,j,d,17,l[2]),j=t(j,C,z,S,p,22,l[3]),S=t(S,j,C,z,u,7,l[4]),z=t(z,S,j,C,f,12,l[5]),C=t(C,z,S,j,h,17,l[6]),j=t(j,C,z,S,g,22,l[7]),S=t(S,j,C,z,m,7,l[8]),z=t(z,S,j,C,v,12,l[9]),C=t(C,z,S,j,w,17,l[10]),j=t(j,C,z,S,y,22,l[11]),S=t(S,j,C,z,_,7,l[12]),z=t(z,S,j,C,b,12,l[13]),C=t(C,z,S,j,x,17,l[14]),j=t(j,C,z,S,k,22,l[15]),S=i(S,j,C,z,c,5,l[16]),z=i(z,S,j,C,h,9,l[17]),C=i(C,z,S,j,y,14,l[18]),j=i(j,C,z,S,s,20,l[19]),S=i(S,j,C,z,f,5,l[20]),z=i(z,S,j,C,w,9,l[21]),C=i(C,z,S,j,k,14,l[22]),j=i(j,C,z,S,u,20,l[23]),S=i(S,j,C,z,v,5,l[24]),z=i(z,S,j,C,x,9,l[25]),C=i(C,z,S,j,p,14,l[26]),j=i(j,C,z,S,m,20,l[27]),S=i(S,j,C,z,b,5,l[28]),z=i(z,S,j,C,d,9,l[29]),C=i(C,z,S,j,g,14,l[30]),j=i(j,C,z,S,_,20,l[31]),S=n(S,j,C,z,f,4,l[32]),z=n(z,S,j,C,m,11,l[33]),C=n(C,z,S,j,y,16,l[34]),j=n(j,C,z,S,x,23,l[35]),S=n(S,j,C,z,c,4,l[36]),z=n(z,S,j,C,u,11,l[37]),C=n(C,z,S,j,g,16,l[38]),j=n(j,C,z,S,w,23,l[39]),S=n(S,j,C,z,b,4,l[40]),z=n(z,S,j,C,s,11,l[41]),C=n(C,z,S,j,p,16,l[42]),j=n(j,C,z,S,h,23,l[43]),S=n(S,j,C,z,v,4,l[44]),z=n(z,S,j,C,_,11,l[45]),C=n(C,z,S,j,k,16,l[46]),j=n(j,C,z,S,d,23,l[47]),S=o(S,j,C,z,s,6,l[48]),z=o(z,S,j,C,g,10,l[49]),C=o(C,z,S,j,x,15,l[50]),j=o(j,C,z,S,f,21,l[51]),S=o(S,j,C,z,_,6,l[52]),z=o(z,S,j,C,p,10,l[53]),C=o(C,z,S,j,w,15,l[54]),j=o(j,C,z,S,c,21,l[55]),S=o(S,j,C,z,m,6,l[56]),z=o(z,S,j,C,k,10,l[57]),C=o(C,z,S,j,h,15,l[58]),j=o(j,C,z,S,b,21,l[59]),S=o(S,j,C,z,u,6,l[60]),z=o(z,S,j,C,y,10,l[61]),C=o(C,z,S,j,d,15,l[62]),j=o(j,C,z,S,v,21,l[63]);r[0]=r[0]+S|0,r[1]=r[1]+j|0,r[2]=r[2]+C|0,r[3]=r[3]+z|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,o=8*t.sigBytes;i[o>>>5]|=128<<24-o%32;var a=e.floor(n/4294967296);for(i[(o+64>>>9<<4)+15]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),i[(o+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(i.length+1),this._process(),t=this._hash,i=t.words,n=0;4>n;n++)o=i[n],i[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=c._createHelper(r),a.HmacMD5=c._createHmacHelper(r)}(Math),function(){var e=CryptoJS,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,i){e=this._hasher=new e.init,"string"==typeof i&&(i=t.parse(i));var n=e.blockSize,o=4*n;i.sigBytes>o&&(i=e.finalize(i)),i.clamp();for(var a=this._oKey=i.clone(),r=this._iKey=i.clone(),s=a.words,c=r.words,l=0;n>l;l++)s[l]^=1549556828,c[l]^=909522486;a.sigBytes=r.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,o,a,r,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,i=0;a>i;i+=1)r[i]=str(i,c)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(a=rep.length,i=0;a>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,c),o&&r.push(quote(n)+(gap?": ":":")+o));else for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(o=str(n,c),o&&r.push(quote(n)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function t(t,i){function n(){return d.update(),a(),d}function o(){g.css(T,w/b),u.css(T,-w),S=g.offset()[T],f.css(z,_),h.css(z,_),g.css(z,x)}function a(){C?p[0].ontouchstart=function(e){1===e.touches.length&&(r(e.touches[0]),e.stopPropagation())}:(g.bind("mousedown",r),h.bind("mouseup",c)),i.wheel&&window.addEventListener?(t[0].addEventListener("DOMMouseScroll",s,!1),t[0].addEventListener("mousewheel",s,!1)):i.wheel&&(t[0].onmousewheel=s)}function r(t){e("body").addClass("noSelect"),S=j?t.pageX:t.pageY,k=parseInt(g.css(T),10)||0,C?(document.ontouchmove=function(e){e.preventDefault(),c(e.touches[0])},document.ontouchend=l):(e(document).bind("mousemove",c),e(document).bind("mouseup",l),g.bind("mouseup",l))}function s(t){if(1>y){var n=t||window.event,o=n.wheelDelta?n.wheelDelta/120:-n.detail/3;w-=o*i.wheelSpeed,w=Math.min(v-m,Math.max(0,w)),g.css(T,w/b),u.css(T,-w),(i.wheelLock||w!==v-m&&0!==w)&&(n=e.event.fix(n),n.preventDefault())}}function c(e){1>y&&(mousePositionNew=j?e.pageX:e.pageY,thumbPositionDelta=mousePositionNew-S,i.scrollInvert&&(thumbPositionDelta=S-mousePositionNew),thumbPositionNew=Math.min(_-x,Math.max(0,k+thumbPositionDelta)),w=thumbPositionNew*b,g.css(T,thumbPositionNew),u.css(T,-w))}function l(){e("body").removeClass("noSelect"),e(document).unbind("mousemove",c),e(document).unbind("mouseup",l),g.unbind("mouseup",l),document.ontouchmove=document.ontouchend=null}var d=this,p=t.find(".viewport"),u=t.find(".overview"),f=t.find(".scrollbar"),h=f.find(".track"),g=f.find(".thumb"),m=0,v=0,w=0,y=0,_=0,b=0,x=0,k=0,S=0,j="x"===i.axis,C="ontouchstart"in document.documentElement,z=j?"width":"height",T=j?"left":"top";return this.update=function(e){switch(sizeLabelCap=z.charAt(0).toUpperCase()+z.slice(1).toLowerCase(),m=p[0]["offset"+sizeLabelCap],v=u[0]["scroll"+sizeLabelCap],y=m/v,_=i.trackSize||m,x=Math.min(_,Math.max(0,i.thumbSize||_*y)),b=i.thumbSize?(v-m)/(_-x):v/_,f.toggleClass("disable",y>=1),e){case"bottom":w=v-m;break;case"relative":w=Math.min(v-m,Math.max(0,w));break;default:w=parseInt(e,10)||0}o()},n()}e.tiny=e.tiny||{},e.tiny.scrollbar={options:{axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,scrollInvert:!1,trackSize:!1,thumbSize:!1}},e.fn.tinyscrollbar=function(i){var n=e.extend({},e.tiny.scrollbar.options,i);return this.each(function(){e(this).data("tsb",new t(e(this),n))}),this},e.fn.tinyscrollbar_update=function(t){return e(this).data("tsb").update(t)}}),function(e,t,i){function n(e){var t={},n=/^jQuery\d+$/;return i.each(e.attributes,function(e,i){i.specified&&!n.test(i.name)&&(t[i.name]=i.value)}),t}function o(e,t){var n=this,o=i(n);if(n.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),e===!0)return o[0].value=t;o.focus()}else n.value="",o.removeClass("placeholder"),n==r()&&n.select();else o.removeClass("placeholder")}function a(){var e,t=this,a=i(t),r=this.id;if(""==t.value){if("password"==t.type){if(!a.data("placeholder-textinput")){try{e=a.clone().attr({type:"text"})}catch(s){e=i("<input>").attr(i.extend(n(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":a,"placeholder-id":r}).bind("focus.placeholder",o),a.data({"placeholder-textinput":e,"placeholder-id":r}).before(e)}a=a.removeAttr("id").hide().prev().attr("id",r).show()}a.addClass("placeholder"),a[0].value=a.attr("placeholder")}else a.removeClass("placeholder")}function r(){try{return t.activeElement}catch(e){}}var s,c,l="[object OperaMini]"==Object.prototype.toString.call(e.operamini),d="placeholder"in t.createElement("input")&&!l,p="placeholder"in t.createElement("textarea")&&!l,u=i.fn,f=i.valHooks,h=i.propHooks;d&&p?(c=u.placeholder=function(){return this},c.input=c.textarea=!0):(c=u.placeholder=function(){var e=this;return e.filter((d?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":o,"blur.placeholder":a}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},c.input=d,c.textarea=p,s={get:function(e){var t=i(e),n=t.data("placeholder-password");return n?n[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var n=i(e),s=n.data("placeholder-password");return s?s[0].value=t:n.data("placeholder-enabled")?(""==t?(e.value=t,e!=r()&&a.call(e)):n.hasClass("placeholder")?o.call(e,!0,t)||(e.value=t):e.value=t,n):e.value=t}},d||(f.input=s,h.value=s),p||(f.textarea=s,h.value=s),i(function(){i(t).delegate("form","submit.placeholder",function(){var e=i(".placeholder",this).each(o);setTimeout(function(){e.each(a)},10)})}),i(e).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(){function set(str,value){for(var p,cur=VARS.source,ps=str.split("."),ks=[],fns="",i=0,len=ps.length;len>i;i++)p=ps[i],cur=cur[p],ks.push('["'+ps[i]+'"]');fns="VARS.source"+ks.join("")+'="'+value+'"',eval("("+fns+")")}function get(e){for(var t=VARS.source,i=e.split("."),n=0,o=i.length;o>n;n++)if(t=t[i[n]],void 0===t)return;return t}for(var VARS={prefix:"$",keys:["SYS","ROOM","PAGE"],source:{},scope:window},i=0;i<VARS.keys.length;i++){var key=VARS.keys[i],fkey=VARS.prefix+key,obj=VARS.scope[fkey];obj&&(VARS.source[key.toLowerCase()]=obj)}define("douyu/context",["shark/util/cookie/1.0"],function(e){location.host;e.config("keypre",get("sys.cookie_pre")||"");var t={set:set,get:get};return t})}(),shark.config({resolve:function(e){if(shark.helper.file.isAbsolute(e))return!1;var t=e.split("/"),i=t[0],n=shark.helper.file.isCss(e)?"css/":"js/";switch(i){case"douyu":e="app/douyu/"+n+t.slice(1).join("/");break;case"douyu-activity":e="app/douyu/activity/"+n+t.slice(1).join("/")}return e}}),shark.on("createNode",function(e,t){var i,n=shark.helper.file,o="2.0.11";i=t.url,n.isCss(i)?i.indexOf("?")>0?e.href=i+"&"+o:e.href=i+"?"+o:i.indexOf("?")>0?e.src=i+"&"+o:e.src=i+"?"+o}),shark.on("saved",function(e){var t=new RegExp("^douyu//*");t.test(e.id)&&shark.helper.domReady(function(){define([e.id],function(e){e&&"function"==typeof e.application&&e.application.call(e)})})}),define("douyu/page/room/base/api",["jquery","shark/util/flash/bridge/1.0"],function(e,t,i){var n={flash:{id:"room_flash_proxy"}},o=["room_dycookie_set","room_dycookie_get","room_login_show","room_reg_show","room_bus_login","room_bus_login2","room_bus_phock","room_bus_pagescr","room_bus_showwatchtip","room_bus_showwatchtipdown","room_bus_checksevertime","room_data_sererr","room_data_flaerr","room_data_chat","room_data_chat2","room_data_schat","room_data_sys","room_data_brocast","room_data_cqrank","room_data_cqrankupdate","room_data_olyw","room_data_info","room_data_login","room_data_userc","room_data_setadm","room_data_gift","room_data_buycq","room_data_tasklis","room_data_taskcou","room_data_taskrec","room_data_chest","room_data_onekeyacc","room_data_chatinit","room_data_chatrep","room_data_ycchange","room_data_state","room_data_nstip","room_data_nstip2","room_data_illchange","room_data_getdid","room_data_giftbat1","room_data_ancpoints","room_data_reg","room_data_idle","room_data_idle_dp","room_screenChange","room_data_ulgrow","room_data_ulico","room_data_rankgap","room_data_expchange","room_data_beastrec","room_data_beastrep","room_data_petrec","room_data_buytickets","room_data_chargelive","room_data_endchargelive","room_data_endtrysee","room_data_cden","room_data_sabonus","room_data_sabonusget","room_bus_comcall","room_data_admfail","room_data_chatpri","room_data_per","room_data_giftbat2","room_data_balance","room_data_tasksign","room_data_chestquery","room_data_chatcd","room_data_luckdrawcd","room_data_wbsharesuc"],a=["js_newuser_client","js_userlogin","js_verReque","js_anotherlogin","js_sendmsg","js_blackuser","js_userlogout","js_setadmin","js_sendsize","js_barrage","js_myblacklist","adverment","js_givePresent","js_giveGift","js_queryTask","js_newQueryTask","js_obtainTask","js_roomSignUp","js_keyTitles","js_reportBarrage","js_exitFullScreen","js_rewardList","js_pmFeedback","js_query_giftPkg","js_switchStream","js_superDanmuClick","js_GetHongbao","js_effectVisible","js_shieGiftEffect","js_breakRuleTip","js_timeLoginTip","js_sendhandler","js_shareSuccess","js_effect_config","js_turn_on_activity","js_UserNoHandle","js_UserNoFlowHandle","js_UserHaveHandle","js_buytickets_success"],r={fnIn:function(e,t){for(var i=0,n=e.length;n>i;i++)if(t===e[i])return t;return!1},fnInACJ:function(e){return r.fnIn(o,e)},fnInJCA:function(e){return r.fnIn(a,e)}},s={},c=function(t,i){if(t=r.fnInACJ(t),!t)return!1;var n,o,a;return e.isFunction(i)?(n=i,o=window):(n=i.fn||function(){},a=i.data,o=i.scope||window),e.isArray(s[t])||(s[t]=[]),s[t].push({fn:n,data:a,scope:o}),!0},l=function(e){var t,i=[],n=Array.prototype.slice.call(arguments,1);if(e=r.fnInACJ(e),!e)return!1;for(var o,a=s[e],c=0,l=a.length;l>c;c++)o=a[c],o.data&&(i.push(o.data),t=i.concat(n)),t=i.concat(n),o.fn.apply(o.scope,t);return!0},d=function(e){var t,i=arguments[1],n=[].slice.call(arguments,2),o=navigator.appName.indexOf("Microsoft")>=0,a=o?window[e]:document[e];a&&(t=a[i])&&t.apply(a,n)},p=function(e){if(e=r.fnInJCA(e)){var t=[n.flash.id,e],i=[].slice.call(arguments,1),o=t.concat(i);d.apply(window,o)}},u=function(e,t){"flash.id"===e&&(n.flash.id=t)},f=function(){for(var e,i,n=0,a=o.length;a>n;n++)e=o[n],i={fn:function(e){var t=[e.name],i=Array.prototype.slice.call(arguments,1),n=t.concat(i);l.apply(window,n)},data:{name:e}},t.add(e,i)},h={application:f,set:u,reg:c,exe:p};return shark.config("debug")&&(window.ACJ_C=s),h}),define("douyu/com/header",["jquery","shark/class","shark/observer","shark/util/lang/1.0","shark/util/template/2.0","shark/util/cookie/1.0","douyu/context","douyu/com/sign","douyu/com/header-dp","douyu/com/verifyPhone","douyu/com/user","shark/util/flash/data/1.0","douyu/page/room/base/api","douyu/com/header-olympics"],function(e,t,i,n,o,a,r,s,c,l,d,p,u,f){var h,g,m,v,w,y,_,b;m={interval:function(e,t,i){setTimeout(function(){e()!==!1&&m.interval(e,t)},t),i===!0&&e()},console:function(e){window.location.href.indexOf("WD_DEBUG=true")>0&&(window.console?console[e.type?e.type:"log"](e.info):window.alert(e.info))},_evt_menu_toggle:function(){for(var t,i=[].slice.call(arguments,0),n=0,o=i.length;o>n;n++)t=i[n],e(t).on("mouseenter",function(){var t=e(this),i=t.data("timer");i&&clearTimeout(i),i=setTimeout(function(){t.addClass("open")},100),t.data("timer",i)}).on("mouseleave",function(){var t=e(this),i=t.data("timer");i&&clearTimeout(i),i=setTimeout(function(){t.removeClass("open")},100),t.data("timer",i)})},_checkMousePointIsInArea:function(){var t=[].slice.call(arguments,0),i=t[0],n=t.slice(1),o=!0;return e.each(n,function(e,t){var n=t.offset(),a={w:t.width(),h:t.height()},r={s:n.left,e:n.left+a.w},s={s:n.top,e:n.top+a.h},c=i.x>=r.s&&i.x<=r.e&&i.y>=s.s&&i.y<=s.e;return c?void 0:(o=!1,!1)}),o},_format_his_time:function(e,t){var i=e-t;return i>=604800?"很久以前":i>=86400?Math.floor(i/86400)+"天前":i>=3600?Math.floor(i/3600)+"小时前":i>=1200?15*Math.floor(Math.floor(i/60)/15)+"分钟前":i>=900?"15分钟前":i>=60?Math.floor(i/60)+"分钟前":"刚刚"},_format_online:function(e){return e=parseInt(e),1>e?0:e>=1e4?(e/1e4).toFixed(1)+"万":e}},v={flanch:function(){var e=g,t=e.doms.search,i=t.find(".ipt"),n=t.find("i");e.config.search||(e.config.search={boxw:t.width(),iptw:i.width(),icow:n.width()});var o=e.config.search,a=o.boxw-o.iptw,r=20,s=o.boxw+r,c=s-a;t.animate({width:s}),i.animate({width:c})},narrowing:function(){var e=g;if(e.config.search){var t=e.doms.search,i=t.find(".ipt"),n=e.config.search;t.animate({width:n.boxw}),i.animate({width:n.iptw})}},search:function(t,i){var n="";if(t=e.trim(t),i=e.isFunction(i)?i:function(){},!t)return e.dialog({lock:!0,content:"搜索关键词还没有填写",icon:"warning",ok:i,close:i}),!1;t=encodeURIComponent(t).replace(new RegExp("'","g"),"");var o=document.createElement("a");o.target="_blank",o.href="/search/"+t+n,e("body").append(e(o)),o.click(),e(o).remove()}},w={preLoadHistory:function(){var e=g,t=e.doms.historyEle,i=t.find(".h-pop");i.removeClass("state-2 state-3").addClass("state-1"),t.addClass("open"),this.reqHistoryData()},reqHistoryData:function(){var t=function(e){this.resHistoryView(e)};e.ajax("/member/cp/get_user_history",{type:"get",dataType:"json",success:e.proxy(t,this)})},resHistoryView:function(e){var t=g,i=t.doms.historyEle,a=i.find(".h-pop");if(!(e&&e.nowtime&&e.history_list&&e.history_list.length))return void a.removeClass("state-1 state-2").addClass("state-3");for(var r,s,c=e.history_list,l=e.nowtime,d=n.string.join("{{each list as item}}","<li>","<p>",'<a href="/{{item.rid}}" target="_blank">{{item.n}}</a>',"</p>","<span>",'<a href="#" class="{{item.headCls}}">{{item.timegap}}</a>','<a href="#" class="head-ico2">{{item.on}}</a>','<a href="#" class="head-ico3">{{item.uc}}</a>',"</span>","</li>","{{/each}}"),p=o.compile(d),u=0,f=c.length;f>u;u++)s=c[u],s.headCls=0===parseInt(s.ls,10)?"head-ico4":"head-ico1",s.timegap=m._format_his_time(l,s.lt);r=p({list:c}),a.find(".h-list").html(r),a.removeClass("state-1 state-3").addClass("state-2")},clsHistoryView:function(){var e=g,t=e.doms.historyEle,i=t.find(".h-pop");t.removeClass("open"),i.removeClass("state-1 state-2 state-3")}},y={preLoadFollow:function(){var e=g,t=e.doms.follow,i=t.find(".f-pop");i.removeClass("state-2 state-3").addClass("state-1"),t.addClass("open"),this.reqFollowData()},reqFollowData:function(){var t=function(e){this.resFollowView(e)};e.ajax("/member/cp/get_follow_list",{type:"get",dataType:"json",success:e.proxy(t,this)})},resFollowView:function(e){var t=g,i=t.doms.follow,a=i.find(".f-pop");if(!(e&&e.nowtime&&e.room_list&&e.room_list.length))return void a.removeClass("state-1 state-2").addClass("state-3");for(var r,s,c=e.room_list,l=e.nowtime,d=n.string.join("{{each list as item}}","<li>","<p>",'<a href="/{{item.room_id}}" target="_blank">{{item.room_name}}</a>',"</p>","<span>",'<a href="/{{item.room_id}}" class="head-ico1">已播{{item.minnum}}分钟</a>','<a href="/{{item.room_id}}" class="head-ico2">{{item.nickname}}</a>','<a href="/{{item.room_id}}" class="head-ico3">{{item.onlineStr}}</a>',"</span>","</li>","{{/each}}"),p=o.compile(d),u=0,f=c.length;f>u;u++)s=c[u],s.minnum=parseInt((l-s.show_time)/60),s.onlineStr=m._format_online(s.online);r=p({list:c}),a.find(".f-list").html(r),a.removeClass("state-1 state-3").addClass("state-2")},clsFollowView:function(){var e=g,t=e.doms.follow,i=t.find(".f-pop");t.removeClass("open"),i.removeClass("state-1 state-2 state-3")}},_={reqLetterData:function(t){var i=g,n=i.config.autoReqLet,o=(r.get("sys.uid"),this);if(n){var a="/lapi/member/userInfo/getInfo/";i.config.autoReqLet=!1,e.ajax(a,{type:"get",dataType:"json",timeout:3e3,cache:!1,success:function(e){i.config.autoReqLet=!0,o.resLetterView1(e),o.reqLetterNext()}})}else this.resLetterView2(),this.reqLetterNext()},reqLetterDataFirst:function(){var t=(r.get("sys.uid"),"/lapi/member/userInfo/getInfo/"),i=this;e.ajax(t,{type:"get",dataType:"json",timeout:3e3,cache:!1,success:function(e){i.resLetterView1(e),i.reqLetterNext()}})},reqLetterDataFirstRandom:function(){var e=parseInt(10*Math.random())+1,t=1e3*e;setTimeout(function(){_.reqLetterDataFirst()},t)},reqLetterNext:function(){var e=this,t=g;setTimeout(function(){t.config.autoReqLet=!0,e.reqLetterData()},3e5)},resLetterView1:function(e){var t=g,i=t.doms,n=e.error,o=e.data,s=0,c="",l="",d=i.loginEle.find(".umes-icon"),p=i.loginEle.find(".mes-icon");0===parseInt(n,10)&&o&&o.pmNew&&0===parseInt(o.pmNew.code,10)&&(s=o.pmNew.msg?o.pmNew.msg:0,l="userletnum"+r.get("sys.uid"),s>0?(c=s>99?"99+":s,d.html(c).removeClass("hide"),p.html(c).removeClass("hide")):(d.html("").addClass("hide"),p.html("").addClass("hide")),a.set(l,s,2592e3))},resLetterView2:function(){var t=g,i=t.doms,n="userletnum"+r.get("sys.uid"),o=a.get(n),s="",c=i.loginEle.find(".mes-icon");o=e.isNumeric(o)?parseInt(o):0,s=o>99?"99+":o,o>0?(i.loginEle.find(".umes-icon").html(s).removeClass("hide"),c.html(s).removeClass("hide")):(i.loginEle.find(".umes-icon").addClass("hide"),c.addClass("hide"))}},b={levelExp:{leve_json:{0:{lv:1,pic:"user1.gif",mpic:"cn01.png",
name:"菜鸟"},100:{lv:2,pic:"user2.gif",mpic:"brass05.png",name:"黄铜5"},1000:{lv:3,pic:"user3.gif",mpic:"brass04.png",name:"黄铜4"},5000:{lv:4,pic:"user4.gif",mpic:"brass03.png",name:"黄铜3"},10000:{lv:5,pic:"user5.gif",mpic:"brass02.png",name:"黄铜2"},20000:{lv:6,pic:"user6.gif",mpic:"brass01.png",name:"黄铜1"},30000:{lv:7,pic:"user7.gif",mpic:"silver05.png",name:"白银5"},40000:{lv:8,pic:"user8.gif",mpic:"silver04.png",name:"白银4"},50000:{lv:9,pic:"user9.gif",mpic:"silver03.png",name:"白银3"},60000:{lv:10,pic:"user10.gif",mpic:"silver02.png",name:"白银2"},80000:{lv:11,pic:"user11.gif",mpic:"silver01.png",name:"白银1"},100000:{lv:12,pic:"user12.gif",mpic:"gold05.png",name:"黄金5"},150000:{lv:13,pic:"user13.gif",mpic:"gold04.png",name:"黄金4"},200000:{lv:14,pic:"user14.gif",mpic:"gold03.png",name:"黄金3"},250000:{lv:15,pic:"user15.gif",mpic:"gold02.png",name:"黄金2"},300000:{lv:16,pic:"user16.gif",mpic:"gold01.png",name:"黄金1"},400000:{lv:17,pic:"user17.gif",mpic:"pt05.png",name:"铂金5"},500000:{lv:18,pic:"user18.gif",mpic:"pt04.png",name:"铂金4"},600000:{lv:19,pic:"user19.gif",mpic:"pt03.png",name:"铂金3"},700000:{lv:20,pic:"user20.gif",mpic:"pt02.png",name:"铂金2"},800000:{lv:21,pic:"user21.gif",mpic:"pt01.png",name:"铂金1"},1000000:{lv:22,pic:"user22.gif",mpic:"diamond05.png",name:"钻石5"},1200000:{lv:23,pic:"user23.gif",mpic:"diamond04.png",name:"钻石4"},1500000:{lv:24,pic:"user24.gif",mpic:"diamond03.png",name:"钻石3"},2000000:{lv:25,pic:"user25.gif",mpic:"diamond02.png",name:"钻石2"},3000000:{lv:26,pic:"user26.gif",mpic:"diamond01.png",name:"钻石1"},5000000:{lv:27,pic:"user27.gif",mpic:"master05.png",name:"大师5"},8000000:{lv:28,pic:"user28.gif",mpic:"master04.png",name:"大师4"},11000000:{lv:29,pic:"user29.gif",mpic:"master03.png",name:"大师3"},14000000:{lv:30,pic:"user30.gif",mpic:"master02.png",name:"大师2"},17000000:{lv:31,pic:"user31.gif",mpic:"master01.png",name:"大师1"}},exp_level:{0:{lv:1,ywzr:0,dmtx:0,jgyc:0,ryzl:0,pic:"newlv1.png",mpic1:"newm1_lv1.png",mpic2:"newm2_lv1.png",mpic3:"newm3_lv1.png"},10:{lv:2,ywzr:0,dmtx:0,jgyc:0,ryzl:0,pic:"newlv2.png",mpic1:"newm1_lv2.png",mpic2:"newm2_lv2.png",mpic3:"newm3_lv2.png"},55:{lv:3,ywzr:0,dmtx:0,jgyc:0,ryzl:0,pic:"newlv3.png",mpic1:"newm1_lv3.png",mpic2:"newm2_lv3.png",mpic3:"newm3_lv3.png"},145:{lv:4,ywzr:0,dmtx:0,jgyc:0,ryzl:0,pic:"newlv4.png",mpic1:"newm1_lv4.png",mpic2:"newm2_lv4.png",mpic3:"newm3_lv4.png"},290:{lv:5,ywzr:0,dmtx:1,jgyc:0,ryzl:0,pic:"newlv5.png",mpic1:"newm1_lv5.png",mpic2:"newm2_lv5.png",mpic3:"newm3_lv5.png"},500:{lv:6,ywzr:0,dmtx:1,jgyc:0,ryzl:0,pic:"newlv6.png",mpic1:"newm1_lv6.png",mpic2:"newm2_lv6.png",mpic3:"newm3_lv6.png"},785:{lv:7,ywzr:0,dmtx:1,jgyc:0,ryzl:0,pic:"newlv7.png",mpic1:"newm1_lv7.png",mpic2:"newm2_lv7.png",mpic3:"newm3_lv7.png"},1155:{lv:8,ywzr:0,dmtx:2,jgyc:0,ryzl:0,pic:"newlv8.png",mpic1:"newm1_lv8.png",mpic2:"newm2_lv8.png",mpic3:"newm3_lv8.png"},1620:{lv:9,ywzr:0,dmtx:2,jgyc:0,ryzl:0,pic:"newlv9.png",mpic1:"newm1_lv9.png",mpic2:"newm2_lv9.png",mpic3:"newm3_lv9.png"},2285:{lv:10,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv10.png",mpic1:"newm1_lv10.png",mpic2:"newm2_lv10.png",mpic3:"newm3_lv10.png"},3248:{lv:11,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv11.png",mpic1:"newm1_lv11.png",mpic2:"newm2_lv11.png",mpic3:"newm3_lv11.png"},4607:{lv:12,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv12.png",mpic1:"newm1_lv12.png",mpic2:"newm2_lv12.png",mpic3:"newm3_lv12.png"},6460:{lv:13,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv13.png",mpic1:"newm1_lv13.png",mpic2:"newm2_lv13.png",mpic3:"newm3_lv13.png"},8905:{lv:14,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv14.png",mpic1:"newm1_lv14.png",mpic2:"newm2_lv14.png",mpic3:"newm3_lv14.png"},12040:{lv:15,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv15.png",mpic1:"newm1_lv15.png",mpic2:"newm2_lv15.png",mpic3:"newm3_lv15.png"},15963:{lv:16,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv16.png",mpic1:"newm1_lv16.png",mpic2:"newm2_lv16.png",mpic3:"newm3_lv16.png"},20772:{lv:17,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv17.png",mpic1:"newm1_lv17.png",mpic2:"newm2_lv17.png",mpic3:"newm3_lv17.png"},26565:{lv:18,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv18.png",mpic1:"newm1_lv18.png",mpic2:"newm2_lv18.png",mpic3:"newm3_lv18.png"},33440:{lv:19,ywzr:2,dmtx:3,jgyc:0,ryzl:0,pic:"newlv19.png",mpic1:"newm1_lv19.png",mpic2:"newm2_lv19.png",mpic3:"newm3_lv19.png"},42315:{lv:20,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv20.png",mpic1:"newm1_lv20.png",mpic2:"newm2_lv20.png",mpic3:"newm3_lv20.png"},53689:{lv:21,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv21.png",mpic1:"newm1_lv21.png",mpic2:"newm2_lv21.png",mpic3:"newm3_lv21.png"},68061:{lv:22,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv22.png",mpic1:"newm1_lv22.png",mpic2:"newm2_lv22.png",mpic3:"newm3_lv22.png"},85930:{lv:23,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv23.png",mpic1:"newm1_lv23.png",mpic2:"newm2_lv23.png",mpic3:"newm3_lv23.png"},107795:{lv:24,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv24.png",mpic1:"newm1_lv24.png",mpic2:"newm2_lv24.png",mpic3:"newm3_lv24.png"},134155:{lv:25,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv25.png",mpic1:"newm1_lv25.png",mpic2:"newm2_lv25.png",mpic3:"newm3_lv25.png"},165509:{lv:26,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv26.png",mpic1:"newm1_lv26.png",mpic2:"newm2_lv26.png",mpic3:"newm3_lv26.png"},202356:{lv:27,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv27.png",mpic1:"newm1_lv27.png",mpic2:"newm2_lv27.png",mpic3:"newm3_lv27.png"},245195:{lv:28,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv28.png",mpic1:"newm1_lv28.png",mpic2:"newm2_lv28.png",mpic3:"newm3_lv28.png"},294525:{lv:29,ywzr:3,dmtx:6,jgyc:"1",ryzl:1,pic:"newlv29.png",mpic1:"newm1_lv29.png",mpic2:"newm2_lv29.png",mpic3:"newm3_lv29.png"},353855:{lv:30,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv30.png",mpic1:"newm1_lv30.png",mpic2:"newm2_lv30.png",mpic3:"newm3_lv30.png"},425182:{lv:31,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv31.png",mpic1:"newm1_lv31.png",mpic2:"newm2_lv31.png",mpic3:"newm3_lv31.png"},510503:{lv:32,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv32.png",mpic1:"newm1_lv32.png",mpic2:"newm2_lv32.png",mpic3:"newm3_lv32.png"},611815:{lv:33,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv33.png",mpic1:"newm1_lv33.png",mpic2:"newm2_lv33.png",mpic3:"newm3_lv33.png"},731115:{lv:34,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv34.png",mpic1:"newm1_lv34.png",mpic2:"newm2_lv34.png",mpic3:"newm3_lv34.png"},870400:{lv:35,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv35.png",mpic1:"newm1_lv35.png",mpic2:"newm2_lv35.png",mpic3:"newm3_lv35.png"},1031667:{lv:36,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv36.png",mpic1:"newm1_lv36.png",mpic2:"newm2_lv36.png",mpic3:"newm3_lv36.png"},1216913:{lv:37,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv37.png",mpic1:"newm1_lv37.png",mpic2:"newm2_lv37.png",mpic3:"newm3_lv37.png"},1428135:{lv:38,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv38.png",mpic1:"newm1_lv38.png",mpic2:"newm2_lv38.png",mpic3:"newm3_lv38.png"},1667330:{lv:39,ywzr:4,dmtx:10,jgyc:"1",ryzl:1,pic:"newlv39.png",mpic1:"newm1_lv39.png",mpic2:"newm2_lv39.png",mpic3:"newm3_lv39.png"},1936525:{lv:40,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv40.gif",mpic1:"newm1_lv40.png",mpic2:"newm2_lv40.png",mpic3:"newm3_lv40.png"},2245716:{lv:41,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv41.gif",mpic1:"newm1_lv41.png",mpic2:"newm2_lv41.png",mpic3:"newm3_lv41.png"},2604899:{lv:42,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv42.gif",mpic1:"newm1_lv42.png",mpic2:"newm2_lv42.png",mpic3:"newm3_lv42.png"},3024070:{lv:43,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv43.gif",mpic1:"newm1_lv43.png",mpic2:"newm2_lv43.png",mpic3:"newm3_lv43.png"},3513225:{lv:44,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv44.gif",mpic1:"newm1_lv44.png",mpic2:"newm2_lv44.png",mpic3:"newm3_lv44.png"},4082360:{lv:45,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv45.gif",mpic1:"newm1_lv45.png",mpic2:"newm2_lv45.png",mpic3:"newm3_lv45.png"},4741471:{lv:46,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv46.gif",mpic1:"newm1_lv46.png",mpic2:"newm2_lv46.png",mpic3:"newm3_lv46.png"},5500554:{lv:47,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv47.gif",mpic1:"newm1_lv47.png",mpic2:"newm2_lv47.png",mpic3:"newm3_lv47.png"},6369605:{lv:48,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv48.gif",mpic1:"newm1_lv48.png",mpic2:"newm2_lv48.png",mpic3:"newm3_lv48.png"},7358620:{lv:49,ywzr:5,dmtx:18,jgyc:"1",ryzl:1,pic:"newlv49.gif",mpic1:"newm1_lv49.png",mpic2:"newm2_lv49.png",mpic3:"newm3_lv49.png"},8477635:{lv:50,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv50.gif",mpic1:"newm1_lv50.png",mpic2:"newm2_lv50.png",mpic3:"newm3_lv50.png"},9743316:{lv:51,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv51.gif",mpic1:"newm1_lv51.png",mpic2:"newm2_lv51.png",mpic3:"newm3_lv51.png"},11172329:{lv:52,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv52.gif",mpic1:"newm1_lv52.png",mpic2:"newm2_lv52.png",mpic3:"newm3_lv52.png"},12781340:{lv:53,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv53.gif",mpic1:"newm1_lv53.png",mpic2:"newm2_lv53.png",mpic3:"newm3_lv53.png"},14587015:{lv:54,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv54.gif",mpic1:"newm1_lv54.png",mpic2:"newm2_lv54.png",mpic3:"newm3_lv54.png"},16606020:{lv:55,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv55.gif",mpic1:"newm1_lv55.png",mpic2:"newm2_lv55.png",mpic3:"newm3_lv55.png"},18855021:{lv:56,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv56.gif",mpic1:"newm1_lv56.png",mpic2:"newm2_lv56.png",mpic3:"newm3_lv56.png"},21350684:{lv:57,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv57.gif",mpic1:"newm1_lv57.png",mpic2:"newm2_lv57.png",mpic3:"newm3_lv57.png"},24109675:{lv:58,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv58.gif",mpic1:"newm1_lv58.png",mpic2:"newm2_lv58.png",mpic3:"newm3_lv58.png"},27148660:{lv:59,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv59.gif",mpic1:"newm1_lv59.png",mpic2:"newm2_lv59.png",mpic3:"newm3_lv59.png"},30477645:{lv:60,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv60.gif",mpic1:"newm1_lv60.png",mpic2:"newm2_lv60.png",mpic3:"newm3_lv60.png"},34116628:{lv:61,ywzr:6,dmtx:30,jgyc:"1",ryzl:1,pic:"newlv61.gif",mpic1:"newm1_lv61.png",mpic2:"newm2_lv61.png",mpic3:"newm3_lv61.png"}}},show:function(){var e=g,t=e.doms.loginEle,i=t.find(".l-menu"),n=e.doms.loginBox.find(".l-txt"),o=0;i.stop(!0,!0).animate({},50,function(){i.show().removeClass("out"),t.addClass("open")}),o=15+n.outerWidth()+6,e.doms.lmsjtop.css({right:o})},hide:function(){var e=g,t=e.doms.loginEle,i=t.find(".l-menu");i.stop(!0,!0).fadeOut(),i.addClass("out"),t.removeClass("open")},processRoom:function(){var t=g,i=this,n=t.doms,o=d.check(),a=n.body.data("diy"),r=0;"number"==typeof a?r=a:"string"==typeof a?r=parseInt(a,10):"undefined"==typeof a&&(r=0),o?i.roomHeaderRender():(1===r?n.chatTopAd.css({top:"0px"}):n.chatTopAd.css({top:"105px"}),e('[data-login-content="no"]').removeClass("hide"),e(document).trigger("scroll"))},reqTaskData:function(){var t=this,i=(r.get("sys.uid"),"/lapi/member/api/getTask?"+(new Date).getTime()),n=function(e){0===parseInt(e.error,10)&&e.msg&&t.resTaskInfoView(e.msg)};e.ajax(i,{type:"get",dataType:"json",success:e.proxy(n,t)})},resTaskInfoView:function(e){var t=g,i=this,n=t.doms;if("undefined"!=typeof e.image&&""!==e.image||"undefined"!=typeof e.link&&""!==e.link||"undefined"!=typeof e.name&&""!==e.name||"undefined"!=typeof e.comment&&""!==e.comment){var o=n.loginBox.find(".task-a"),a=n.loginBox.find(".task-text"),s=n.loginBox.find(".task-img"),c=a.find(".title"),l=a.find(".comment"),d=(r.get("sys.res_url"),r.get("sys.upload_url")),p=e.image?d+e.image:"",u=e.link?e.link:"",f=e.name?e.name:"",h=e.comment?e.comment:"",m=i.curStrByLen(h,69);s.css({background:"none"}),s.html('<img src="'+p+'"/>'),""!==u?o.attr({href:u,target:"_blank"}):o.removeAttr("href"),c.html(f).attr({title:f}),l.html(m).attr({title:h})}else{var v=n.loginBox.find(".l-menu"),w=v.find(".task");w.hide()}},curStrByLen:function(e,t){for(var i,n=0,o=e.length,a="",r=0;o>r;r++)if(i=e.charAt(r),n++,escape(i).length>4&&n++,a=a.concat(i),n>=t)return a=a.concat("...");return t>n?e:void 0},processNoRoom:function(){var t=this,i=(r.get("sys.uid"),"/lapi/member/api/getInfo?"+(new Date).getTime()),n=function(e){0===parseInt(e.error,10)&&e.msg&&t.noRoomHeaderRender(e.msg)};e.ajax(i,{type:"get",dataType:"json",success:e.proxy(n,t)})},noRoomHeaderRender:function(e){var t=g,n=this,o=t.doms,a="",r=o.loginEle,s=(r.find(".l-menu"),$SYS.nickname?$SYS.nickname:"");a=e.gold/100+"",o.userName.html(s),o.userName.attr("title",s),o.silverBox.html(e.silver),o.goldBox.html(a),i.trigger("mod.userinfo.updateSilverGold",{silver:e.silver,gold:a}),n.identify(e),n.updateUserInfo(e),e.info&&e.info.orm&&n.renderLiveSet(e.info.orm)},renderLiveSet:function(e){var t,i=g,n=i.doms.loginBox.find(".live-set").find("p"),o=i.doms.loginBox.find(".live-set-a"),a=i.doms.loginBox.find(".live-hot");"undefined"!=typeof e?1===parseInt(e,10)?(n.html("直播设置"),a.addClass("hide")):(n.html("我要直播"),o.attr({href:"/client?platform=1"}),a.removeClass("hide")):(t=r.get("sys.own_room"),0===parseInt(t,10)?(n.html("我要直播"),o.attr({href:"/client?platform=1"}),a.removeClass("hide")):(n.html("直播设置"),a.addClass("hide")))},getExpInfo:function(t){var i=this,n={},o=i.levelExp.exp_level;return e.each(o,function(e,i){return i.score=parseInt(e),n.next=i,t<parseInt(e)?!1:void(n.current=i)}),n},processIdenifyData:function(e){var t=g,i=this,n=(t.doms,{});i.umidfy=e.its?e.its:i.umidfy,i.emidfy=e.es?e.es:i.emidfy,i.mbidfy=e.ps?e.ps:i.mbidfy,n.info={its:i.umidfy,ems:i.emidfy,pos:i.mbidfy},i.identify(n)},identify:function(e){var t,i=g,n=this,o=i.doms,a=e.info?e.info:{},r="no",s=o.loginEle.find(".uname-aut"),c=o.loginEle.find(".mobile-aut"),l=o.loginEle.find(".email-aut"),d={its:{ele:s,no:"实名认证",href:"/member/cp/changeIdent",yes:"已认证"},pos:{ele:c,no:"绑定手机",href:"/member/cp/cpBindPhone",yes:"已绑定手机"},ems:{ele:l,no:"绑定邮箱",href:"/member/cp/changeEmail",yes:"已绑定邮箱"}};for(var p in a)"ems"===p&&(r="1"===a[p]?"yes":"no",t=d[p],n.identifySingle(t.ele,r,t[r],t.href)),"its"===p&&(r="2"===a[p]?"yes":"no",t=d[p],n.identifySingle(t.ele,r,t[r],t.href)),"pos"===p&&(r="1"===a[p]?"yes":"no",t=d[p],n.identifySingle(t.ele,r,t[r],t.href))},identifySingle:function(e,t,i,n){"yes"===t?e.find("i").addClass("high"):(e.find("i").removeClass("high"),e.attr({href:n,target:"_blank"})),e.attr("title",i)},updateUserInfo:function(e){var t,i,n=g,o=this,a=n.doms;o.userExp=e.exp,o.userTotleExp=parseFloat(e.exp)/100,o.exp_json=o.getExpInfo(parseInt(o.userTotleExp,10)),o.currentLevel=o.exp_json.current.lv,t=o.currentLevel+1,o.nextUpExp=o.exp_json.next.score,o.updateProgress(),i=r.get("sys.avatar_url"),a.headerImg.attr("src",i+"upload/"+e.info.icon+"_middle.jpg"),a.leaveImg.attr("src",o.returnUlevelIcon(o.currentLevel,!1)),a.leaveImg.attr("title","用户等级："+(o.currentLevel<n.config.highLevel+1?o.currentLevel:n.config.highLevel)),t>n.config.highLevel?a.leaveNextImg.hide():(a.leaveNextImg.attr("src",o.returnUlevelIcon(t,!0)),a.leaveNextImg.attr("title","用户等级："+(t<n.config.highLevel+1?t:n.config.highLevel))),o.unlockeSkill()},returnUlevelIcon:function(e,t){var i,n=g;n.doms;return i=t===!1?r.get("sys.web_url")+"/app/douyu/res/page/room-normal/level/LV"+(e<n.config.highLevel+1?e:n.config.highLevel)+(e>=50?".gif":".png")+"?20160620":r.get("sys.web_url")+"/app/douyu/res/page/room-normal/level/LV"+(e<n.config.highLevel+1?e:n.config.highLevel)+"-next.png?20160620"},updateProgress:function(){var e,t=g,i=this,n=t.doms,o=i.exp_json.current.score,a=(i.userTotleExp-o)/(i.nextUpExp-o)*100,r=-1;if(a+="",r=a.indexOf("."),e=r>-1?"0"==a.substring(r+1,r+2)?a.substr(0,r):a.substr(0,r+2):a,i.userTotleExp<i.nextUpExp){n.curExpBox.css({width:e+"%"}),n.curExpText.text(e+"%");var s=(i.nextUpExp-i.userTotleExp).toFixed(1).split(".");0===parseInt(s[1],10)&&(s=[s[0]]),n.curExpBoxNum.html(s.join("."))}else n.curExpBox.css({width:"100%"}),n.curExpText.text("100%");return i.userTotleExp>=34116628?void n.curExpBoxNum.parent().html("您已经达到最高等级"):void 0},unlockeSkill:function(){for(var t=g,i=this,n=t.doms,o=n.skillIcon,a=0,r=o.length;r>a;a++)!function(t){var n=e(o[t]);i.unlockeSkillList(n,t)}(a)},unlockeSkillList:function(t,i){var n=g,o=this,a=(n.doms,t.find("[data-unlocak-list] li")),r=t.find(".locked"),s=0,c=0,l=0,d=0,p=a.length,u=0,f=null,h=0;for(u=0;p>u;u++)if(f=e(a[u]),h=f.attr("data-unlocak-level"),parseInt(h)<=parseInt(o.currentLevel)&&(s++,f.addClass("unlocked-l"),a.eq(u).removeClass("hide")),s&&a.eq(u+1).length){a.eq(u+1).removeClass("hide");var m=a.eq(u+1).attr("data-unlocak-level");if(m>o.currentLevel)break}for(0===s?a.eq(0).removeClass("hide"):r.html("已解锁"+s+"/"+p),s?t.addClass("skill-0"+(i+1)):t.find(".skill-em").addClass("hide"),u=0;p>u;u++)if(f=e(a[u]),h=f.attr("data-unlocak-level"),parseInt(o.currentLevel)>=parseInt(h))c=parseInt(h),l=parseInt(o.currentLevel);else if(parseInt(o.currentLevel)>=c&&parseInt(o.currentLevel)<parseInt(h)){l=parseInt(h);break}parseInt(o.currentLevel)>=c&&parseInt(o.currentLevel)<l?(d=c,t.find(".skill-em").attr("data-min",d).html(d),0===d?t.find(".skill-em").addClass("hide"):t.find(".skill-em").removeClass("hide")):parseInt(o.currentLevel)<=l&&(d=c,t.find(".skill-em").attr("data-min",d).html(d).removeClass("hide"))},ExpPopGX:function(t){var i,n,o,a=g,r=a.doms,s=r.curExpText.offset();i=e('<div class="exp-pop-gx">经验值 +'+t+"</div>"),e("body").append(i),n=s.top+r.curExpText.height()-i.height(),o=s.top-i.height(),i.css({top:n,left:s.left-i.outerWidth(!0),marginLeft:"112px"}).animate({top:o},1e3).fadeOut("slow",function(){e(this).remove()})},roomHeaderRender:function(){var t=g,n=this,o=t.doms;n.getFlashData(),i.trigger("mod.room.diy.layout"),o.chatTopAd.css({top:0}),e('[data-login-content="no"]').addClass("hide")},getFlashData:function(){var e=g,t=this;e.doms;i.on("mod.login.userinfo",function(e){t.renderUserInfo(e),t.renderLiveSet()}),i.on("mod.header.identify",function(e){t.processIdenifyData(e)})},renderUserInfo:function(e){var t=g,n=this,o=t.doms,a=p.decode(e),r=p.get(a,"silver"),s=p.get(a,"gold")/100+"",c=$SYS.nickname?$SYS.nickname:"";s.indexOf(".")>-1&&(s=s.substring(0,s.indexOf(".")+3)),o.userName.html(c),o.userName.attr("title",c),n.silver=parseFloat(r),n.gold=parseFloat(s),o.silverBox.html(n.silver),o.goldBox.html(n.gold),i.trigger("mod.userinfo.updateSilverGold",{silver:n.silver,gold:n.gold}),n.exprienceUpdate(e),i.trigger("mod.userinfo.userinfoready",{msg:"用户信息初始化完成",silver:n.silver,gold:n.gold})},exprienceUpdate:function(e){var t,n=g,o=this,a=n.doms,r=p.decode(e);o.userId=p.get(r,"uid"),o.diffExp=parseFloat(p.get(r,"diff"))/100,o.userTotleExp=parseFloat(p.get(r,"exp"))/100,o.exp_json=o.getExpInfo(parseInt(o.userTotleExp,10)),o.currentLevel=parseInt(p.get(r,"level")),t=o.currentLevel+1,o.nextUpExp=o.exp_json.next.score,o.updateProgress(),i.trigger("douyu.avatar.get",$SYS.uid,"middle",function(e){a.headerImg.attr("src",e)}),a.leaveImg.attr("src",o.returnUlevelIcon(o.currentLevel,!1)),a.leaveImg.attr("title","用户等级："+(o.currentLevel<n.config.highLevel+1?o.currentLevel:n.config.highLevel)),t>n.config.highLevel?a.leaveNextImg.hide():(a.leaveNextImg.attr("src",o.returnUlevelIcon(t,!0)),a.leaveNextImg.attr("title","用户等级："+(t<n.config.highLevel+1?t:n.config.highLevel))),o.unlockeSkill(),o.userId?$SYS.uid==o.userId&&i.trigger("mod.chatrank.cqrankupdate",o.currentLevel):i.trigger("mod.chatrank.cqrankupdate",o.currentLevel)}},h=t({init:function(t){this.config=e.extend(!0,{},{target:"#header",onLogin:function(){},onReg:function(){},onExit:function(){},highLevel:60,isHasGetHttpData:!1},t),l.check(),this.getDoms(),this.render(),this.bindEvt(),i.trigger("mod.header.userinforended")},getDoms:function(){var t=e('[data-login-content="yes"]');this.config.$el=e(this.config.target),this.doms={loginBox:t,silverBox:t.find('[data-login-user="silver"]'),goldBox:t.find('[data-login-user="gold"]'),curExpBox:t.find('[data-login-user="exp"]'),curExpBoxNum:t.find('[data-login-user="up-exp-num"]'),curExpText:t.find('[data-login-user="exp-txt"]'),expBarBtn:t.find('[data-exp-bar="btn"]'),expBarTip:t.find('[data-exp-bar="box"]'),headerHref:t.find("[data-login-user]"),headerImg:t.find('[data-login-user="header-img"]'),userName:t.find('[data-login-user="user-name"]'),leaveImg:t.find('[data-login-user="level-img"]'),leaveNextImg:t.find('[data-login-user="level-next-img"]'),skillIcon:t.find("[data-skill-icon]"),chargeBtn:t.find(".getYc"),chatTopAd:e(".chat-top-ad"),historyEle:this.config.$el.find(".head-oth .o-history"),follow:this.config.$el.find(".head-oth .o-follow"),unlogin:this.config.$el.find(".head-oth .o-unlogin"),loginEle:this.config.$el.find(".head-oth .o-login"),assort:this.config.$el.find(".head-nav .assort"),search:this.config.$el.find(".head-oth .o-search"),download:this.config.$el.find(".head-oth .o-download"),body:e("body"),lmsjtop:t.find(".lmsj-top")}},render:function(){this.doms;g=this,"undefined"!=typeof $ROOM&&b.processRoom()},login:function(){var e=this.doms,t=r.get("sys.uid"),n=r.get("sys.nickname"),o=(r.get("sys.password"),r.get("sys.own_room"));n&&t&&(e.loginEle.find(".l-pic").html('<img src="'+$SYS.res_url+'douyu/images/defaultAvatar.png?20160310"/>'),i.trigger("douyu.avatar.get",t,"middle",function(t){e.loginEle.find(".l-pic img").attr("src",t)}),e.loginEle.find(".l-txt").text(n),e.loginEle.find('[data-login-user="user-name"]').text(n),e.historyEle.removeClass("hide"),e.follow.removeClass("hide"),e.unlogin.addClass("hide"),e.loginEle.removeClass("hide"),0===parseInt(o,10)&&e.loginEle.find(".l-menu ul li").eq(4).remove(),_.reqLetterDataFirstRandom(),i.trigger("mod.header.userinforended"))},exit:function(){e.dialog.confirm("确认退出吗？",this.config.onExit)},initHead:function(e){var t=document.documentElement.clientWidth||document.body.clientWidth;1520>=t&&t>1366?(e.addClass("w1520head"),e.removeClass("w11366head")):1366>=t?(e.addClass("w1366head"),e.removeClass("w1520head")):(e.removeClass("w1366head"),e.removeClass("w1520head"))},bindEvt:function(){var t=this,n=this.doms,o=t.config.$el.find(".head");this.initHead(o),e(window).resize(function(){t.initHead(o)}),m._evt_menu_toggle(n.assort,n.download),n.search.find("input").on("focus",function(){v.flanch()}).on("blur",function(){v.narrowing()}).on("keydown",function(t){if(13===t.keyCode){var i=e(this),n=i.val();v.search(n,function(){i.focus()})}}),n.search.on("click",".s-ico",function(){var e=n.search.find("input"),t=e.val();return v.search(t,function(){e.focus()}),!1}),n.historyEle.on("mouseenter",function(t){var i=e(this),n=i.data("stop"),o=i.data("timer");o&&clearTimeout(o),o=setTimeout(function(){return n?i.data("stop",!1):void w.preLoadHistory()},100),i.data("timer",o)}).on("mouseleave",function(t){var i=e(this),o={x:t.screenX,y:t.screenY},a=i.data("stop"),r=i.data("timer");r&&clearTimeout(r),r=setTimeout(function(){if(a){var e=m._checkMousePointIsInArea(o,n.historyEle,n.historyEle.find(".h-pop"));return e||y.clsFollowView(),i.data("stop",!1)}w.clsHistoryView()},100),i.data("timer",r)}),n.historyEle.on("mouseenter",".h-pop",function(){n.historyEle.data("stop",!0),setTimeout(function(){n.historyEle.data("stop",!1)},100)}).on("mouseleave",".h-pop",function(){w.clsHistoryView()}),n.follow.on("mouseenter",function(t){var i=e(this),n=i.data("stop"),o=i.data("timer");o&&clearTimeout(o),o=setTimeout(function(){return n?i.data("stop",!1):void y.preLoadFollow()},100),i.data("timer",o)}).on("mouseleave",function(t){var i=e(this),o={x:t.screenX,y:t.screenY},a=i.data("stop"),r=i.data("timer");r&&clearTimeout(r),r=setTimeout(function(){if(a){var e=m._checkMousePointIsInArea(o,n.follow,n.follow.find(".f-pop"));return e||y.clsFollowView(),i.data("stop",!1)}y.clsFollowView()},100),i.data("timer",r)}),n.follow.on("mouseenter",".f-pop",function(){n.follow.data("stop",!0),setTimeout(function(){n.follow.data("stop",!1)},100)}),n.loginEle.on("mouseenter",function(i){var n=e(this),o=n.data("stop"),a=n.data("timer");(new Date).getTime();a&&clearTimeout(a),a=setTimeout(function(){return o?n.data("stop",!1):(t.config.isHasGetHttpData===!1&&("undefined"==typeof $ROOM&&b.processNoRoom(),b.reqTaskData(),t.config.isHasGetHttpData=!0),void b.show())},100),n.data("timer",a)}).on("mouseleave",function(t){var i=e(this),o={x:t.screenX,y:t.screenY},a=i.data("stop"),r=i.data("timer");r&&clearTimeout(r),r=setTimeout(function(){if(a){var e=m._checkMousePointIsInArea(o,n.loginEle,n.loginEle.find(".l-menu"));return e||y.clsFollowView(),i.data("stop",!1)}b.hide()},100),i.data("timer",r)}),n.loginEle.on("mouseenter",".l-menu",function(){n.loginEle.data("stop",!0),setTimeout(function(){n.loginEle.data("stop",!1)},100)}).on("mouseleave",".l-menu",function(){b.hide()}),n.skillIcon.on("mouseenter",function(){var t=e(this).find(".sl-item-hover");t.removeClass("hide")}),n.skillIcon.on("mouseleave",function(){var t=e(this).find(".sl-item-hover");t.addClass("hide")}),n.expBarBtn.on("mouseenter",function(){n.expBarTip.removeClass("hide")}),n.expBarBtn.on("mouseleave",function(){n.expBarTip.addClass("hide")}),n.chargeBtn.on("mousedown",function(){try{DYS.storage.save("_dypay_fp",2)}catch(e){}}),i.on("mod.userinfo.change",function(e){var t,o,a;if(e.current&&(t=e.current,void 0!==t.silver&&(o=parseInt(t.silver),b.silver=o,n.silverBox.html(o),i.trigger("mod.userinfo.updateSilverGold",{silver:o})),void 0!==t.gold&&(a=t.gold,b.gold=a,n.goldBox.html(a),i.trigger("mod.userinfo.updateSilverGold",{gold:a}))),e.change){if(t=e.change,"yuwan"===t.type&&parseInt(t.silver)===b.silver)return;t.exp&&(b.expUpN=t.exp,b.userTotleExp+=parseFloat(t.exp)),t.silver&&(o=t.silver?t.silver:0,b.silver=parseInt(b.silver)+parseInt(o),n.silverBox.html(b.silver),i.trigger("mod.userinfo.updateSilverGold",{silver:b.silver})),t.gold&&(a=t.gold?t.gold:0,b.gold+=parseInt(a),n.goldBox.html(b.gold),i.trigger("mod.userinfo.updateSilverGold",{gold:b.gold}))}}),u.reg("room_data_ycchange",function(e){var t=p.decode(e),o=p.get(t,"b")/100+"";o.indexOf(".")>-1&&(o=o.substring(0,o.indexOf(".")+3)),b.gold=parseFloat(o),n.goldBox.html(b.gold),i.trigger("mod.userinfo.updateSilverGold",{gold:b.gold})}),u.reg("room_data_expchange",function(e){p.decode(e).too();b.exprienceUpdate(e)}),n.loginEle.find(".logout").last().click(function(){return t.exit(),!1}),n.unlogin.on("click",".u-login",function(){return e.isFunction(t.config.onLogin)?(t.config.onLogin(),!1):void 0}).on("click",".u-reg",function(){return e.isFunction(t.config.onReg)?(t.config.onReg(),!1):void 0})}});var x={init:function(t){return s.aop("clean","header-assort",function(t){if(t&&1==t.id){var i=e(t.el);i[i.html()?"removeClass":"addClass"]("hide"),e(document).trigger("scroll")}}),g?void 0:g=new h(t)}};return x}),define("douyu/com/header-olympics",["jquery","shark/observer","douyu/context"],function(e,t,i){var n="2016/08/06 07:00:00",o=(1*new Date,null),a=null,r=0,s=null,c=1,l={init:function(){var n=this,a=location.href;return a.indexOf("?OLYM_DEBUG=1")>0&&(c=0),o=e("#header .head-nav"),c?(e("#header .head-logo").addClass("olympics"),n.render(),void t.on("mod.index.ready",function(){var t=['<div class="olympics-anchor">','<a target="_blank" title="点击参与竞猜，观看奥运直播" href="/83668">','<img src="',i.get("sys.res_url")+"zt_live/RioOlympics/images/btn.png?20160812",'"/>',"</a>","</div>"];e(".olympics-box").append(t.join(""))})):!1},render:function(t){var i=this,n=i.getHeaderTmpl();a=e(n);var r=a.find(".olympics-holder");r.css({visibility:"hidden",opacity:0}),o.after(a),s=a.find("[data-role='counter']"),i.showLogic(),i.bindEvt()},showLogic:function(){var t=e("#header .head").width(),i=e("#header .head-logo").outerWidth()+parseInt(e("#header .head-logo").css("margin-left")),n=e("#header .head-nav").outerWidth(),o=e("#header .head-oth").outerWidth()+parseInt(e("#header .head-oth").css("margin-right"))+20,r=a.find(".olympics-holder");t-i-n-o>=r.width()?r.css({visibility:"visible",opacity:1}):r.css({visibility:"hidden",opacity:0})},bindEvt:function(){var t=this,i=null;e(window).resize(function(){i&&clearTimeout(i),i=setTimeout(function(){t.showLogic()},50)}),a.find("a").click(function(){e(this).find(".olympics-tips").hide()}).mouseenter(function(){e(this).find(".olympics-tips").show()}).mouseleave(function(){e(this).find(".olympics-tips").hide()})},counting:function(){var t=this,i=1*new Date(n)-(1*new Date+r);if(i>0)s.html(t.dateFormat(i/1e3,"<i>DD</i>天<i>hh</i>小时<i>mm</i>分")),setTimeout(function(){t.counting()},300);else{a.remove();var c=t.getCompleteTmpl();a=e(c),o.after(a)}},getServerInfo:function(){return e.ajax({url:"/ztCache/RioOlympics/timestamp",dataType:"json",type:"get"})},getHeaderTmpl:function(){return['<span class="olympics-box">','<a target="_blank" href="/83668" class="olympics-holder olympics-counter">','<span class="olympics-tips">看里约直播，赢助威勋章，玩奥运竞猜！点击前往奥运专题</span>',"</a>","</span>"].join("")},getCompleteTmpl:function(){return['<img class="olympics-holder"/>'].join("")},dateFormat:function(e,t){var i="";if(!e||isNaN(e))return i;var n=parseInt(e,10),o=parseInt(n),a=parseInt(o%60),r=parseInt(o/60),s=parseInt(r%60),c=parseInt(r/60),l=parseInt(c%24),d=parseInt(c/24);return d=d>9?d:"0"+d,l=l>9?l:"0"+l,s=s>9?s:"0"+s,a=a>9?a:"0"+a,t=t.replace("DD",d),t=t.replace("hh",l),t=t.replace("mm",s),t=t.replace("ss",a)}};l.init(),t.on("mod.header.userinforended",function(){l.showLogic()})}),define("douyu/com/verifyPhone",["jquery","shark/util/cookie/1.0","shark/class"],function(e,t,i){var n=i({init:function(){this.$el='<div class="solephnoemum" > <div class="solephnoemum-cont"><p class="solephnoemum-title">温馨提示</p> <p class="solephnoemum-body">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;近期，因系统升级和改造，需要再次确认您的手机号码，手机号码是您唯一性的身份标识，为确保您可以正常享受斗鱼直播的乐趣，请及时前往个人中心进行验证。</p></div><div class="aui_buttons"><button  data-type="skip">立即验证</button>&nbsp;&nbsp;&nbsp;&nbsp;<button  data-type="close">稍后确认</button></div></div>'},check:function(){t.get("nickname")&&!t.get("verifyPhoneNum")&&t.get("phone_need_confirm")&&(this.render(),this.bindEvent())},render:function(){e.dialog({content:this.$el,lock:!0,id:"checkNum",close:function(){t.set("verifyPhoneNum","false",86400)}})},bindEvent:function(){e(".aui_buttons>button[data-type='close']").on("click",function(){e.dialog.list.checkNum.close()}),e(".aui_buttons>button[data-type='skip']").on("click",function(){t.set("verifyPhoneNum","false",86400),window.location.href="/member/cp/confirmPhone"})}}),o=new n;return o}),define("douyu/com/header-dp",["jquery"],function(e){function t(){var t=e("#header");i&&t.length&&(t.on("mousedown",".head .head-nav .index",function(){i.submit({point_id:i.point.page(-1,1)})}),t.on("mousedown",".head .head-nav .live",function(){i.submit({point_id:i.point.page(-1,2)})}),t.on("mousedown",".head .head-nav .assort",function(){i.submit({point_id:i.point.page(-1,3)})}),t.on("mousedown",".head .head-nav .funny",function(){i.submit({point_id:i.point.page(-1,4)})}),t.on("mousedown",".head .head-nav .yuba",function(){i.submit({point_id:i.point.page(-1,5)})}),t.on("keydown",".head .head-oth .s-ipt",function(t){if(13===t.keyCode){var n={};n.v=e(this).val(),window.$SYS&&$SYS.uid&&(n.uid=$SYS.uid),i.submit({point_id:i.point.page(-1,6,1),ext:n})}}),t.on("mousedown",".head .head-oth .s-ico",function(){var e=t.find(".head .head-oth .s-ipt"),n={};n.v=e.val(),i.submit({point_id:i.point.page(-1,6,2),ext:n})}),t.on("mouseenter",".head .head-oth .o-history .h-ico, .head .head-oth .o-history .h-txt",function(){i.queue.may({point_id:i.point.page(-1,7)})}),t.on("mouseenter",".head .head-oth .o-follow .f-ico, .head .head-oth .o-follow .f-txt",function(){i.queue.may({point_id:i.point.page(-1,8)})}),t.on("mousedown",".head .head-oth .o-download>a",function(){i.submit({point_id:i.point.page(-1,9)})}),t.find(".head .head-oth .o-download .d-list a").eq(0).on("mousedown",function(){i.submit({point_id:i.point.page(-1,9,1)})}),t.find(".head .head-oth .o-download .d-list a").eq(1).on("mousedown",function(){i.submit({point_id:i.point.page(-1,9,2)})}),t.on("mousedown",".head .head-oth .o-unlogin .u-login",function(){i.submit({point_id:i.point.page(-1,10,2)})}),t.on("mousedown",".head .head-oth .o-unlogin .u-reg",function(){i.submit({point_id:i.point.page(-1,11,2)})}),t.on("mouseenter",".head .head-oth .o-login .l-pic, .head .head-oth .o-login .l-txt",function(){i.queue.may({point_id:i.point.page(-1,12)})}),t.on("mousedown",".head .head-oth .o-login .l-menu .user_icon1",function(){i.submit({point_id:i.point.page(-1,13,1)})}),t.on("mousedown",".head .head-oth .o-login .l-menu .user_icon2",function(){
i.submit({point_id:i.point.page(-1,13,2)})}),t.on("mousedown",".head .head-oth .o-login .l-menu .user_icon7",function(){i.submit({point_id:i.point.page(-1,13,3)})}),t.on("mousedown",".head .head-oth .o-login .l-menu .user_icon3",function(){i.submit({point_id:i.point.page(-1,13,4)})}),t.on("mousedown",".head .head-oth .o-login .l-menu .user_icon4",function(){i.submit({point_id:i.point.page(-1,13,5)})}),t.on("mousedown",".head .head-oth .o-login .l-menu .user_icon_pay",function(){i.submit({point_id:i.point.page(-1,13,6)});try{i.storage.save("_dypay_fp",1)}catch(e){}}))}var i=window.DYS;e(function(){try{t()}catch(e){}})}),define("douyu/com/footer",["jquery"],function(e){function t(){return!!(window.ActiveXObject||"ActiveXObject"in window)}var i={check:function(){var t=location.host,i=e("#footer-company-info-1"),n=e("#footer-company-info-2");i.hide(),n.hide(),"www.douyutv.com"===t?i.show():"www.douyu.com"===t&&n.show()}},n={print:function(){try{if(window.console&&window.console.log){var e=location.protocol;console.log("怀才不遇无处倾诉？\n快来斗鱼！JOIN US！\n我们重金悬赏各类有才之士，\n也包括优秀应届生哦！\n"),t()?console.log("请将简历发送至 zhanghaicun@douyu.tv（邮件标题请以“姓名-应聘XX职位-来自console”命名）"):console.log("请将简历发送至 %c zhanghaicun@douyu.tv（邮件标题请以“姓名-应聘XX职位-来自console”命名）","color:red"),console.log("职位介绍："+e+"://www.douyu.com/cms/about/jobs.html#page3")}}catch(i){}}},o=function(){i.check(),n.print()};e(o)}),define("douyu/com/left",["jquery","shark/class","shark/observer","shark/util/storage/1.0","douyu/context","douyu/com/user","douyu/com/left-dp"],function(e,t,i,n,o,a,r){var s,c,l={left:{storageName:"leftstate",state:{open:"open",close:"close"}}};c=t({init:function(){this.config={el:"#left",sll:"#left-big-scroll",state:l.left.state.open},this.render(),this.bindEvt()},render:function(){this.config.$el=e(this.config.el),this.config.$sll=e(this.config.sll),this.config.$cols=this.config.$el.find(".leftnav-cate .column-cont"),this.config.$recs=this.config.$el.find(".leftnav-cate .recom-cont"),this.observer=i.create(this),this.renderSll(),this.screenMedia(),this.renderApplyDelay(),this.checkDelay()},openLists:function(){var e=this.config.$cols.find("dd");e.removeClass("hide")},renderCalc:function(){this.config.$cols.find("dt").each(function(t){e(this).attr("data-index",t)}),this.config.$cols.find("dd").each(function(t){var i=e(this),n=i.height();i.removeClass("hide").attr({"data-index":t,"data-height":n}),0!==t&&i.hide()})},renderSll:function(){this.config.$sll.tinyscrollbar({axis:"y"}),this.resetSllDelay()},resetSll:function(){var e=this.config.$el,t=this.config.$sll,i=e.find(".left-big .b-content"),n=e.find(".left-footer"),o=n.find(".btn-live"),a=e.height()-n.outerHeight(!0);o.is(":hidden")||(a-=10),i.height(a),t.tinyscrollbar_update()},resetSllDelay:function(t){var i=this;setTimeout(function(){i.resetSll(),e.isFunction(t)&&t()},500)},resetSllBot:function(){var e=this.config.$el,t=this.config.$sll,i=e.find(".left-big .b-content"),n=e.find(".left-footer"),o=n.find(".btn-live"),a=e.height()-n.outerHeight(!0),r=t.find(".overview").outerHeight(!0)-t.height();o.is(":hidden")||(a-=10),r=r>0?r:0,i.height(a),t.tinyscrollbar_update(0)},resetSllBotDelay:function(){this.config.isOpenCalced=!0,setTimeout(e.proxy(this.resetSllBot,this),500)},renderApply:function(){var e=a.check(),t=o.get("sys.own_room"),i=this.config.$el.find(".left-big .btn-live a");e&&"1"===t?(i.attr({href:"/room/my",title:"进入直播间"}),i.find("span").text("进入直播间")):(i.attr({href:"/room/apply",title:"申请直播"}),i.find("span").text("申请直播"))},renderApplyDelay:function(){setTimeout(e.proxy(this.renderApply,this),500)},open:function(){var t=e(window),i=t.height(),n=this;this.config.state=l.left.state.open,this.save(),this.config.$el.removeClass("small"),!this.config.isOpenCalced&&768>i?(this.resetSllDelay(function(){n.resetSllBotDelay()}),this.config.isOpenCalced=!0):this.resetSllBotDelay(),this.observer.trigger("toggle",this.config.state)},check:function(){var e=n.get(l.left.storageName);null!==e&&(e=parseInt(e,10),0===e&&this.close())},checkDelay:function(){setTimeout(e.proxy(this.check,this),500)},close:function(){this.config.state=l.left.state.close,this.save(),this.config.$el.addClass("small"),this.observer.trigger("toggle",this.config.state)},closeDelay:function(){setTimeout(e.proxy(this.close,this),300)},toggle:function(){this.config.state===l.left.state.open?this.close():this.open()},save:function(){var e=this.config.state===l.left.state.open?1:0;n.set(l.left.storageName,e)},openColMenu:function(e){var t=this.config.$cols,i=t.find("dt"),n=t.find("dd"),o=i.eq(e),a=n.eq(e);if(i.removeClass("cur"),o.addClass("cur"),0===e){var r=a.data("height");r?a.height(r).show():(a.show(),a.data("height",a.height()))}else{var s=n.eq(0),c=s.data("height");n.each(function(e){return 0===e?!0:void n.eq(e).hide()}),s.height(c-a.height()/2),a.show()}0!==e&&this.resetSllBot()},openCurColMenu:function(){var e=this.config.$cols.find("dd li a.current");if(!e.length)return void this.openColMenu(0);var t=e.closest("dd");index=t.data("index"),index&&this.openColMenu(index)},screenMedia:function(t){var i=e(window),n=e("#header"),o=this.config.$el,a=o.find(".left-footer .btn-live"),r=(o.height(),i.width()),s=i.height(),c=n.outerHeight(!0),l=this;768>s?this.resetSllDelay(function(){l.resetSllBotDelay()}):(a.show(),this.resetSllDelay()),o.css("height",s-c),!t&&1340>r&&this.closeDelay()},bindEvt:function(){function t(e){e.stopPropagation(),e.preventDefault()}function i(){n.config.state=l.left.state.open,n.save()}var n=this,o=this.config.$el;o.on("click",".left-big .follow, .left-small .follow",function(e){t(e);var n=a.check(),o="/room/my_follow";n?(i(),location.href=o):a.show("login",{redirect:o,callback:function(e){e===!0&&i()}})}),o.on("click",".left-big .btn-live a",function(e){var t=a.check();return t?void 0:(a.show("login",{redirect:"/room/apply"}),!1)}),o.on("click",".left-btn",function(){n.toggle()}),o.on("click",".leftnav-cate .r-tit ul li",function(){var t=e(this),i=t.index();t.siblings("li").removeClass("cur"),t.addClass("cur"),0===i?(n.config.$cols.removeClass("hide"),n.config.$recs.addClass("hide"),n.openCurColMenu()):(n.config.$cols.addClass("hide"),n.config.$recs.removeClass("hide"))}),o.on("click",".left-small .small-nav ul li",function(t){"游戏"===e.trim(e(this).text())||e(this).hasClass("follow")||i()});var r=e("[data-left-item]");r.on("mouseenter",function(){var t=e(this);if(!t.hasClass("cur")){var i=t.attr("data-left-item"),n=e("[data-left-item="+i+"]");n.css({background:"#272727"}),n.eq(0).find("span").css({color:"#f60"})}}),r.on("mouseleave",function(){var t=e(this);if(!t.hasClass("cur")){var i=t.attr("data-left-item"),n=e("[data-left-item="+i+"]");n.eq(0).find("span").css({color:"#c6c6c6"}),n.css({background:"#2c2c2c"})}}),e(window).resize(function(){n.config.isOpenCalced=!1,n.screenMedia()})}});var d=function(){s=new c};return e(d),{onToggle:function(e){s&&s.observer.on("toggle",e)}}}),define("douyu/com/left-dp",["jquery"],function(e){function t(){var e=DYS.point.page(),t=e.split("."),i=t.length?t[0]:"";return i}var i=[{target:"#left .left-btn",description:"公共模块-左侧导航-导航开关",events:"mousedown",config:{point_id:t()+".-3.1.0"}},{target:"#left .channel-cate li:eq(0)",description:"公共模块-左侧导航-全部直播按钮",events:"mousedown",config:{point_id:t()+".-3.2.0"}},{target:"#left .channel-cate li:eq(1)",description:"公共模块-左侧导航-全部分类按钮",events:"mousedown",config:{point_id:t()+".-3.3.0"}},{target:"#left .channel-cate li:eq(2)",description:"公共模块-左侧导航-我的关注按钮",events:"mousedown",config:{point_id:t()+".-3.4.0"}},{target:"#left .channel-cate li:eq(3)",description:"公共模块-左侧导航-娱乐中心按钮",events:"mousedown",config:{point_id:t()+".-3.5.0"}},{target:"#left .r-tit li:eq(0)",description:"公共模块-左侧导航-栏目按钮",events:"mousedown",config:{point_id:t()+".-3.6.0",ext:{handle:function(e){this.roomId=e.data("id"),this.status=e.data("status"),this.position=e.index()}}}},{target:"#left .r-tit li:eq(1)",description:"公共模块-左侧导航-推荐按钮",events:"mousedown",config:{point_id:t()+".-3.10.0"}},{target:"#left .recommendHos li",description:"公共模块-左侧导航-栏目热门",events:"mousedown",config:{point_id:t()+".-3.7.0"}},{target:"#left .column-cont dt a",description:"公共模块-左侧导航-栏目一级标签",events:"mousedown",config:{point_id:t()+".-3.8.0",ext:{handle:function(t){this.tag=e.trim(t.text())}}}},{target:"#left .column-cont dd a",description:"公共模块-左侧导航-栏目二级标签",events:"mousedown",config:{point_id:t()+".-3.9.0",ext:{handle:function(t){var i=t.closest("[data-index]").prev(),n=i.text();this.ptag=e.trim(n),this.tag=e.trim(t.text())}}}},{target:"#left .recom-cont  a",description:"公共模块-左侧导航-推荐一级标签",events:"mousedown",config:{point_id:t()+".-3.11.0",ext:{handle:function(t){this.tag=e.trim(t.text())}}}},{target:"#left .btn-live  a",description:"公共模块-左侧导航-申请直播按钮",events:"mousedown",config:{point_id:t()+".-3.12.0"}},{target:"#left .f-other li:eq(0)",description:"公共模块-左侧导航-直播指导按钮",events:"mousedown",config:{point_id:t()+".-3.13.0"}},{target:"#left .f-other li:eq(1)",description:"公共模块-左侧导航-客服支持按钮",events:"mousedown",config:{point_id:t()+".-3.14.0"}},{target:"#left .f-other li:eq(2)",description:"公共模块-左侧导航-房间举报按钮",events:"mousedown",config:{point_id:t()+".-3.15.0"}}];e.each(i,function(t,i){e(document).on(i.events,i.target,function(t){var n=e.extend(!0,{},i),o=n.config?n.config.ext:null,a=e(this);o&&o.handle&&(o.handle(a),delete o.handle),DYS.submit(n.config)})})}),define("douyu/com/imgp",["jquery"],function(e){return function(e,t,i,n){var o,a=e(t),r=0,s=0,c=0,l=0,d=null;e.fn.lazyload=function(p){function u(){var i=0;h.container===n||h.container===t||(r=o.offset().top,s=o.offset().left,c=o.width(),l=o.height()),f.each(function(){var t=e(this);if(!h.skip_invisible||t.is(":visible"))if(e.abovethetop(this,h)||e.leftofbegin(this,h));else if(e.belowthefold(this,h)||e.rightoffold(this,h)){if(++i>h.failure_limit)return!1}else t.trigger("appear"),i=0})}var f=this,h={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return p&&(n!==p.failurelimit&&(p.failure_limit=p.failurelimit,delete p.failurelimit),n!==p.effectspeed&&(p.effect_speed=p.effectspeed,delete p.effectspeed),e.extend(h,p)),o=h.container===n||h.container===t?a:e(h.container),0===h.event.indexOf("scroll")&&o.bind(h.event,function(){return u()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.attr("src")!==n&&i.attr("src")!==!1||i.is("img")&&i.attr("src",h.placeholder),i.one("appear",function(){if(!this.loaded){if(h.appear){var n=f.length;h.appear.call(t,n,h)}var o=new Image;o.onload=function(){var n=i.attr("data-"+h.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[h.effect](h.effect_speed),t.loaded=!0;var a=e.grep(f,function(e){return!e.loaded});if(f=e(a),o=null,h.load){var r=f.length;h.load.call(t,r,h)}},o.src=i.attr("data-"+h.data_attribute)}}),0!==h.event.indexOf("scroll")&&i.bind(h.event,function(){t.loaded||i.trigger("appear")})}),a.bind("resize",function(){d&&clearTimeout(d),d=setTimeout(function(){u(),d=null},50)}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&f.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){u()}),this},e.belowthefold=function(i,o){var s,c=e(i);return s=o.container===n||o.container===t?(t.innerHeight?t.innerHeight:a.height())+a.scrollTop():r+l,s<=c.offset().top-o.threshold},e.rightoffold=function(i,o){var r,l=e(i);return r=o.container===n||o.container===t?a.width()+a.scrollLeft():s+c,r<=l.offset().left-o.threshold},e.abovethetop=function(i,o){var s,c=e(i);return s=o.container===n||o.container===t?a.scrollTop():r,s>=c.offset().top+o.threshold+c.height()},e.leftofbegin=function(i,o){var r,c=e(i);return r=o.container===n||o.container===t?a.scrollLeft():s,r>=c.offset().left+o.threshold+c.width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(e,window,document),{build:function(e){$("img[data-original]").lazyload(e)}}}),define("douyu/com/insight",["jquery"],function(e){return function(e,t,i,n){var o,a=e(t),r=0,s=0,c=0,l=0,d=null;e.fn.insight=function(g){function m(){var i=0;o=e(w.container),w.container===n||w.container===t?(o=e(t),r=0,s=0):(r=o.offset().top,s=o.offset().left),c=o.width(),l=o.height(),v.each(function(){var t=e(this);if(!w.skip_invisible||t.is(":visible"))if(f(this,w)||h(this,w));else if(p(this,w)||u(this,w)){if(++i>w.failure_limit)return!1}else t.trigger("insight"),i=0})}var v=this,w={threshold:0,event:"scroll",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return g&&(n!==g.failurelimit&&(g.failure_limit=g.failurelimit,delete g.failurelimit),n!==g.effectspeed&&(g.effect_speed=g.effectspeed,delete g.effectspeed),e.extend(w,g)),o=w.container===n||w.container===t?a:e(w.container),0===w.event.indexOf("scroll")&&o.bind(w.event,function(){return m()}),this.each(function(){var t=this,i=e(t);i.one("insight",function(){if(!this.loaded){if(w.appear){var e=v.length;w.appear.call(t,e,w)}this.loaded=!0}}),0!==w.event.indexOf("scroll")&&i.bind(w.event,function(){t.loaded||i.trigger("insight")})}),a.bind("resize",function(){d&&clearTimeout(d),d=setTimeout(function(){m(),d=null},50)}),e(i).on("scroll click",function(){d&&clearTimeout(d),d=setTimeout(function(){m(),d=null},50)}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&v.each(function(){e(this).trigger("insight")})}),e(i).ready(function(){m()}),this};var p=function(i,o){var s,c=e(i);return s=o.container===n||o.container===t?(t.innerHeight?t.innerHeight:a.height())+a.scrollTop():r+l,s<=c.offset().top-o.threshold},u=function(i,o){var r,l=e(i);return r=o.container===n||o.container===t?a.width()+a.scrollLeft():s+c,r<=l.offset().left-o.threshold},f=function(i,o){var s,c=e(i);return s=o.container===n||o.container===t?a.scrollTop():r,s>=c.offset().top+o.threshold+c.height()},h=function(i,o){var r,c=e(i);return r=o.container===n||o.container===t?a.scrollLeft():s,r>=c.offset().left+o.threshold+c.width()},g=function(e,t){return!(u(e,t)||h(e,t)||p(e,t)||f(e,t))};e.extend(e.expr[":"],{"below-the-fold":function(e){return p(e,{threshold:0})},"above-the-top":function(e){return!p(e,{threshold:0})},"right-of-screen":function(e){return u(e,{threshold:0})},"left-of-screen":function(e){return!u(e,{threshold:0})},"in-viewport":function(e){return g(e,{threshold:0})},"above-the-fold":function(e){return!p(e,{threshold:0})},"right-of-fold":function(e){return u(e,{threshold:0})},"left-of-fold":function(e){return!u(e,{threshold:0})}})}(e,window,document),{build:function(e){e=$.extend({selectors:"[data-dysign]"},e),$(e.selectors).insight(e)}}}),define("douyu/com/user-control",["jquery","shark/util/lang/1.0","shark/util/cookie/1.0","shark/util/flash/bridge/1.0","douyu/context","shark/ext/swfobject"],function(e,t,i,n,o,a){var r={client_id:window.client_id||1,hmac_flash_ready:!1,salt:null},s={};return s.control={_on_auto_login:function(){},init:function(){s.control.auto()},check:function(t){var n=!!i.get("nickname");return t!==!0||n||i.remove(["auth","auth_wl","uid","nickname","username","own_room","groupid","notification","phonestatus"]),!(i.get("uid")&&o.get("sys.uid")||i.get("nickname")&&o.get("sys.nickname"))||i.get("uid")===o.get("sys.uid")&&i.get("nickname")===o.get("sys.nickname")?!!i.get("uid"):(e.dialog.tips_black("当前登录信息有误,请刷新页面!"),!1)},exit:function(t){if(i.get("stk")){var n=navigator.userAgent;-1!=n.indexOf("MSIE")||-1!=n.indexOf("rv:11")?e.post("/member/logout/ajax",function(){location.href=passport_host+"sso/logout?client_id="+r.client_id},"json"):location.href=passport_host+"sso/logout?client_id="+r.client_id}else i.get("nickname")?location.href="/member/logout":location.reload()},auto:function(){var e=s.control.check(!0);e&&(o.set("sys.uid",i.get("uid")),o.set("sys.username",i.get("username")),o.set("sys.nickname",i.get("nickname")),o.set("sys.password",i.get("auth_wl")),o.set("sys.own_room",i.get("own_room")),o.set("sys.groupid",i.get("groupid")),o.set("sys.notification",i.get("notification")),o.set("sys.phonestatus",i.get("phonestatus")),o.set("sys.stk",i.get("stk")),o.set("sys.biz",i.get("biz")),o.set("sys.ltkid",i.get("ltkid")),o.set("sys.ct",i.get("ct"))),s.control._on_auto_login(e)},logsalt:function(t,i,n){e.post("/member/login/checkUsername",{username:t},function(t){t.c>=0&&(r.salt={text:t.r},e.isFunction(i)&&i.apply(window,n))},"json")},_hmac:function(e,t){try{var i=n.asProxy("hmac_flash_proxy");i&&i.js_psalt&&i.js_psalt(e+"@"+t)}catch(o){}},_load_hmac:function(){var t={url:$SYS.res_url+"simplayer/HTool.swf?"+$SYS.res_ver,flashvars:{},params:{allowscriptaccess:"always",wmode:"opaque"},attributes:{id:"hmac_flash_proxy",name:"hmac_flash_proxy"}};e("body").append('<div style="position:absolute;width:0;overflow:hidden;bottom:0;"><div id="user_login_swf"></div></div>'),a.embedSWF(t.url,"user_login_swf","1px","1px","9","",t.flashvars,t.params,t.attributes)}},s.control.API={auth:function(t,i,n){i=i||e.noop,n=n||e.noop,e.ajax({url:passport_host+"iframe/auth",type:"GET",data:t,dataType:"jsonp",jsonp:"callback",callback:"json_callback",success:i,error:n})},iframeLogin:function(t,i,n){i=i||e.noop,n=n||e.noop,e.ajax({url:passport_host+"iframe/login",type:"GET",data:t,dataType:"jsonp",jsonp:"callback",callback:"json_callback",success:i,error:n})},login:function(t,i,n){i=i||e.noop,n=n||e.noop,e.ajax({url:"/api/passport/login",type:"GET",data:t,dataType:"json",success:i,error:n})},reg:function(t,i,n){i=i||e.noop,n=n||e.noop,e.ajax("/member/register/ajax_new",{type:"post",data:t,dataType:"json",success:i,error:n})},iframeReg:function(t,i,n){i=i||e.noop,n=n||e.noop,e.ajax({url:passport_host+"iframe/register",type:"GET",data:t,dataType:"jsonp",jsonp:"callback",callback:"json_callback",success:i,error:n})},getCPS:function(t,i,n){i=i||e.noop,n=n||e.noop,e.ajax({url:"/member/register/getCpsId?v="+(new Date).getTime(),type:"GET",data:t,dataType:"json",success:i,error:n})},checkUserStatus:function(t,i,n){t=t||{},i=i||e.noop,n=n||e.noop,e.ajax({url:"/member/cp/phone_anchor_status",type:"GET",data:t,dataType:"json",success:i,error:n})},verifyPhone:function(t,i,n){i=i||e.noop,n=n||e.noop,e.ajax("/curl/smscp/sendphonevoid",{type:"post",data:t,dataType:"json",success:i,error:n})},bindPhone:function(t,i,n){i=i||e.noop,n=n||e.noop,e.ajax("/curl/smscp/bindphone",{type:"post",data:t,dataType:"json",success:i,error:n})}},s.control}),define("douyu/com/user-view",["jquery","shark/util/lang/1.0","shark/util/cookie/1.0","shark/util/flash/bridge/1.0","douyu/context","shark/ext/swfobject","douyu/com/vcode-user","douyu/com/vcode9","douyu/com/user-control"],function(e,t,i,n,o,a,r,s,c){window.user_dialog&&(e=window.$||e);var l={view:{el:{pop:"pop",shadow:"shadow",logform:"logform",regform:"regform",phoneform:"phoneform"},type:{login:"login",reg:"reg",phone:"phone",member:"member"},currentView:null},client_id:window.client_id||1,hmac_flash_ready:!1,step:1,salt:null},d={},p={};d.control=c,d.init=function(){d.view.init(),d.control.init()},d.view={init:function(){var t=d.view.make(),i=e("body"),n=e(t.pop),o=e(t.shadow);d.view.$pop=n,d.view.$shadow=o,d.view.$logform=d.view.$pop.find(".loginbox-login form"),d.view.$regform=d.view.$pop.find(".loginbox-reg form"),d.view.$phoneform=d.view.$pop.find(".loginbox-phone form"),d.view.$thirds=d.view.$pop.find(".third-list a"),d.view.$pop.hide().removeClass("hide"),d.view.$shadow.hide().removeClass("hide"),i.append(d.view.$pop),i.append(d.view.$shadow),d.view._is_show=!1,d.view._type=l.view.type.login,setTimeout(function(){d.view.checkStkToLogin(),d.view.evt(),d.bindphone.evt()},50)},el:function(e){return e===l.view.el.pop?d.view.$pop:e===l.view.el.shadow?d.view.$shadow:e===l.view.el.logform?d.view.$logform:e===l.view.el.regform?d.view.$regform:void 0},errorTip:function(t){var i,n,o,a,r=t.type||"error",s=1e3*t.delay||1500;o=l.view.currentView.find(t.element).length>0?l.view.currentView.find(t.element):l.view.currentView.find('input[type="submit"]'),a=o.position(),i=['<div class="myuser-error-tip">','<i class="myuser-error-tip-arrow myuser-error-tip-arrow1"></i><i class="myuser-error-tip-arrow myuser-error-tip-arrow2"></i>','<div class="myuser-error-tip-cont">'+(t.cont||"")+"</div>","</div>"].join(""),"info"===r&&(i=['<div class="myuser-info-tip">','<i class="myuser-info-tip-arrow myuser-info-tip-arrow1"></i><i class="myuser-info-tip-arrow myuser-info-tip-arrow2"></i>','<div class="myuser-info-tip-cont">'+(t.cont||"")+"</div>","</div>"].join("")),n=e(i),l.view.currentView.append(n),n.css({top:a.top+1.2*o.outerHeight(!0),left:a.left+(o.outerWidth(!0)-n.outerWidth(!0))/2}),setTimeout(function(){n.fadeOut("fast",function(){n.remove()})},s)},errorPopTip:function(t){var i,n,o,a,r=1e3*t.delay||1500;o=l.view.currentView.find(t.element).length>0?l.view.currentView.find(t.element):l.view.currentView.find('input[type="submit"]'),a=o.position(),i=['<div class="user-error-tip">','<i class="user-error-tip-arrow user-error-tip-arrow1"></i><i class="user-error-tip-arrow user-error-tip-arrow2"></i>','<div class="user-error-tip-cont">'+(t.cont||"")+"</div>","</div>"].join(""),n=e(i),l.view.currentView.eq(0).append(n),n.css({top:a.top-n.outerHeight(!0)-10,left:a.left+(o.outerWidth(!0)-n.outerWidth(!0))/2}),setTimeout(function(){n.fadeOut("fast",function(){n.remove()})},r)},showInfoTip:function(t){var i,n,o,a;t.type||"error",1e3*t.delay||1500;return o=l.view.currentView.find(t.element),a=o.position(),i=['<div class="myuser-info-tip">','<i class="myuser-info-tip-arrow myuser-info-tip-arrow1"></i><i class="myuser-info-tip-arrow myuser-info-tip-arrow2"></i>','<div class="myuser-info-tip-cont">'+(t.cont||"")+"</div>","</div>"].join(""),n=e(i),l.view.currentView.append(n),n.css({top:a.top+1.2*o.outerHeight(!0),left:a.left+(o.outerWidth(!0)-n.outerWidth(!0))/2}),n},hideInfoTip:function(e){try{e.fadeOut("fast",function(){e.remove()})}catch(t){}},make:function(){return{pop:e.trim(e("#dytemp-loginbox").html()),shadow:e.trim(e("#dytemp-loginbox-shadow").html())}},checkStkToLogin:function(){i.get("ltkid")&&i.get("nickname")&&i.get("uid")&&!i.get("stk")&&this.show()},checkLoginnedUserStatus:function(){var e=function(e){switch(e.result){case-1:d.view.show("phone",{bdTitle:"恭喜您！登录成功"});break;case 1:d.view.show("member",{bdTitle:"恭喜您！登录成功"});break;case 2:d.view.show("member",{bdTitle:"恭喜您！登录成功",memberUrl:"/room/my"})}},t=function(){};d.control.API.checkUserStatus({},e,t)},show:function(t,i,n){try{switch(t){case"login":DYS.submit({point_id:DYS.point.page(-5),ext:{step:l.step++}});break;case"reg":DYS.submit({point_id:DYS.point.page(-6),ext:{step:l.step++}});break;case"phone":DYS.submit({point_id:DYS.point.page(-6,7),ext:{step:l.step++}})}}catch(o){}t=t?t:l.view.type.login,i=e.isPlainObject(i)?i:{},e.extend(!0,l,i),l.callback||(l.callback=i.callback);var a=d.view.$pop.find(".loginbox-hd-tab .t-login"),r=d.view.$pop.find(".loginbox-hd-tab .t-reg"),s=d.view.$pop.find(".loginbox-hd"),c=d.view.$pop.find(".loginbox-bd"),u=d.view.$pop.find(".loginbox-bd[data-type=login]"),f=d.view.$pop.find('.loginbox-bd[data-type="reg"]');return $phone=d.view.$pop.find('.loginbox-bd[data-type="phone"]').addClass("hide"),$member=d.view.$pop.find('.loginbox-bd[data-type="member"]').addClass("hide"),t===l.view.type.phone?(s.addClass("hide"),c.addClass("hide"),i.bdTitle&&$phone.find(".js-loginbox-bd-title").html(i.bdTitle),$phone.removeClass("hide"),l.view.currentView=$phone,d.view._type=t,void d.bindphone.initializeImgCapcha()):t===l.view.type.member?(s.addClass("hide"),c.addClass("hide"),i.bdTitle&&$member.find(".js-loginbox-bd-title").html(i.bdTitle),i.phoneNum&&$member.find(".js-loginbox-bd-title").after('<p class="loginbox-bd-phonenum">手机号码：'+i.phoneNum+"</p>"),i.memberUrl&&$member.find(".apply-anchor").attr("href",i.memberUrl),$member.removeClass("hide"),l.view.currentView=$member,void(d.view._type=t)):(t===l.view.type.login?(s.removeClass("hide"),a.addClass("current"),u.removeClass("hide"),r.removeClass("current"),f.addClass("hide"),l.view.currentView=u):(s.removeClass("hide"),a.removeClass("current"),u.addClass("hide"),r.addClass("current"),f.removeClass("hide"),l.view.currentView=f),void("reg"==t?(i.redirect&&(d.view._redirect=i.redirect),d.view._type=t,d.view.layout(),d.view.$shadow.fadeIn(),d.view.$pop.fadeIn(function(){d.view._is_show=!0})):d.control.API.auth({client_id:l.client_id,t:(new Date).getTime()},function(o){if(1==o.error)i.redirect&&(d.view._redirect=i.redirect),d.view._type=t,d.view.layout(),p.init("init"),d.view.$shadow.fadeIn(),d.view.$pop.fadeIn(function(){d.view._is_show=!0});else if(0==o.error&&o.data.code)d.control.API.login(o.data,function(i){if(0==i.error){d.view.callback(!0),setTimeout(function(){return e.dialog.tips_black("登录成功！",1.5),n?void n():void location.reload()},500);try{DYS.submit({point_id:DYS.point.page(-5,4,1),ext:{step:l.step++}})}catch(o){}}else{e.dialog.tips_black(i.msg,1.5),d.view._type=t,d.view.layout(),d.view.$shadow.fadeIn(),d.view.$pop.fadeIn(function(){d.view._is_show=!0});try{DYS.submit({point_id:DYS.point.page(-5,4,2),ext:{info:i.msg,step:l.step++}})}catch(o){}}});else{e.dialog.tips_black(o.msg,1.5),d.view._type=t,d.view.layout(),d.view.$shadow.fadeIn(),d.view.$pop.fadeIn(function(){d.view._is_show=!0}),p.init("init");try{DYS.submit({point_id:DYS.point.page(-5,4,2),ext:{info:o.msg,step:l.step++}})}catch(a){}}})))},hide:function(){d.view.$pop.fadeOut(function(){d.view._is_show=!1}),d.view.$shadow.fadeOut();var e=l.view.currentView.attr("data-type");"member"!==e&&"phone"!==e||!d.control.check()||window.location.reload()},toggle:function(){d.view._is_show?d.view.hide():d.view.show()},layout:function(){var t,i=e("body"),n=e(window),o=i.height(),a=n.height(),r=d.view.$pop.outerHeight(!0),s=a>o?a:o;t=100>=a-r?0:.2*a,d.view.$shadow.height(s),d.view.$pop.css("top",t)},redirect:function(e){var t=d.view._redirect;return t?(d.view._redirect=void 0,setTimeout(function(){location.href=t},e||50),!0):!1},callback:function(t){if(e.isFunction(l.callback))try{l.callback(t)}catch(i){}},submitLog:function(){var t=d.view.$logform,i=t.find(".btn-sub"),n=t.find("[name]"),o=!0,a=null,r={};if(!t.data("submit")&&(n.each(function(){return(o=d.validate.check(this))?void(r[this.name]=this.value):!1}),o))if(p.instance&&p.instance.isFast()&&!(a=p.instance.getFastResult())){e.dialog.tips_black("验证码错误！");try{DYS.submit({point_id:DYS.point.page(-5,4,2),ext:{info:"验证码错误！",step:l.step++}})}catch(s){}}else r=e.extend({},r,a,l.salt),t.data("submit",!0),i.val("提交中…"),d.view.enter(r,function(e){d.view.callback(e),t.data("submit",e),i.val("登录")})},submitReg:function(){var e=d.view.$regform,t=e.find(".btn-sub"),i=e.find("[name]"),n=e.find("[name=nickname]"),o=!0,a={};if(!e.data("submit")&&(i.each(function(){return(o=d.validate.check(this))?void(a[this.name]=this.value):!1}),o)){var r=u.val();r&&(a.ditchName=r),d.validate.ckRegNicknameAsync(n.get(0),function(i){i&&(e.data("submit",!0),t.val("注册中…"),d.view.reg(a,function(i){d.view.callback(i),e.data("submit",i),t.val("注册")}))})}},submitPhone:function(){try{DYS.submit({point_id:DYS.point.page(-6,10),ext:{step:l.step++}})}catch(e){}var t=d.view.$phoneform,i=t.find(".js-phone-submit"),n=t.find("[name]"),o=!0,a={};n.each(function(){return(o=d.validate.check(this))?void(a[this.name]=this.value):!1}),o&&(t.data("submit",!0),i.find("span").text("提交中…"),d.view.bindphone(a,function(e){t.data("submit",e),i.find("span").text("确认绑定")}))},evt:function(){var t=d.view.$pop,i=d.view.$shadow,n=d.view.$logform,o=d.view.$thirds,a=d.view.$regform;$phoneform=d.view.$phoneform,t.find(".loginbox-close").click(function(e){d.view._evt_stop(e),d.view.hide();try{var t="";switch(l.view.currentView.data("type")){case"login":t=DYS.point.page(-5,5);break;case"reg":t=DYS.point.page(-6,6);break;case"phone":t=DYS.point.page(-6,11)}DYS.submit({point_id:t,ext:{step:l.step++}})}catch(i){}}),t.find(".loginbox-hd-tab .t-login").click(function(e){d.view._evt_stop(e),d.view.show(l.view.type.login)}),t.find(".loginbox-hd-tab .t-reg").click(function(e){d.view._evt_stop(e),d.view.show(l.view.type.reg)}),t.find(".loginbox-bd a.js-switch-reg").click(function(e){d.view._evt_stop(e),d.view.show(l.view.type.reg)}),t.find(".loginbox-bd a.js-switch-login").click(function(e){d.view._evt_stop(e),d.view.show(l.view.type.login)}),i.on("dblclick",function(e){d.view._evt_stop(e),d.view.hide()}),t.on("change","input ,select",function(t){var i=e(this),n=i.data("modified");if(!n)return!1;try{var o="";switch(!0){case i.is('[data-type="login"] [name="username"]'):o=DYS.point.page(-5,1);break;case i.is('[data-type="login"] [name="password"]'):o=DYS.point.page(-5,2);break;case i.is('[data-type="reg"] [name="nickname"]'):o=DYS.point.page(-6,1);break;case i.is('[data-type="reg"] [name="password"]'):o=DYS.point.page(-6,2,1);break;case i.is('[data-type="reg"] [name="password2"]'):o=DYS.point.page(-6,2,2);break;case i.is('[data-type="reg"] [name="protocol"]'):o=DYS.point.page(-6,12);break;case i.is('[data-type="phone"] #selectCountry'):o=DYS.point.page(-6,13,1);break;case i.is('[data-type="phone"] [name="bindphonenum"]'):o=DYS.point.page(-6,13,2);break;case i.is('[data-type="phone"] [name="phonenum_captcha"]'):o=DYS.point.page(-6,13,3);break;case i.is('[data-type="phone"] [name="yzphonenum"]'):o=DYS.point.page(-6,13,4);break;default:o=""}""!==o&&DYS.submit({point_id:o,ext:{step:l.step++}}),n=!1,i.data("modified",!1)}catch(a){}}).on("keyup mouseup","input ,select",function(){e(this).data("modified",!0)}),t.find("#reg_captcha").click(function(e){try{DYS.submit({point_id:DYS.point.page(-6,13,5),ext:{step:l.step++}})}catch(t){}}),o.on("mousedown",function(){var t=e(this);try{DYS.submit({point_id:DYS.point.page(-5,7),ext:{type:t.attr("data-point-2"),view:l.view.currentView.data("type"),step:l.step++}})}catch(i){}}),e(window).resize(function(){d.view._is_show&&d.view.layout()}),t.on("blur","input",function(){var e=d.validate.check(this);e&&("username"===this.name||"nickname"===this.name&&d.validate.ckRegNicknameAsync(this))});var r;a.find("input[name=nickname]").focusin(function(){a.parent().find(".myuser-error-tip").size()>0||(r=d.view.showInfoTip({cont:"注册后昵称不能随意更改",element:this}))}).focusout(function(){d.view.hideInfoTip(r)}),n.submit(function(){return d.view.submitLog(),!1}),a.submit(function(){return d.view.submitReg(),!1}),$phoneform.submit(function(){return d.view.submitPhone(),!1})},_evt_stop:function(e){e.stopPropagation(),e.preventDefault()},enter:function(e,t){d.view._enter(e,t)},_enter:function(t,n){var o=function(t){var o=t.error,r=0===o;if(0===o){var s=function(t){if(0==t.error){i.set("auth_wl",l.md5_m,2592e3),d.control._hmac(l.md5_m,l.md5_h),e.dialog.tips_black("登录成功！",2),d.view.redirect(1e3)||setTimeout(function(){location.reload()},1e3),n(r);try{DYS.submit({point_id:DYS.point.page(-5,4,1),ext:{step:l.step++}})}catch(o){}}else{e.dialog.tips_black(t.msg,1.5),n(!1);try{DYS.submit({point_id:DYS.point.page(-5,4,2),ext:{step:l.step++}})}catch(o){}}};return void d.control.API.login(t.data,s,a)}var c="";if(3===o){var u=t.data;c=["<p>",'<span class="user-name" title="'+u.nick_name+'">'+u.nick_name+"</span>","<span>"+(0===u.expire_time?"已被永久封禁":"将被封禁至"+u.expire_time)+"</span>","</p>",'<p class="reason">封禁原因：'+u.reason+u.operate_time+"</p>"].join("");
try{DYS.submit({point_id:DYS.point.page(-5,4,2),ext:{info:"封禁",step:l.step++}})}catch(f){}}else{c=t.msg;try{DYS.submit({point_id:DYS.point.page(-5,4,2),ext:{info:t.msg,step:l.step++}})}catch(f){}}d.view.errorPopTip({cont:c}),n(!1),p.instance&&p.instance.refresh()},a=function(){n(!1);try{DYS.submit({point_id:DYS.point.page(-5,4,2),ext:{info:"登录过程中发生错误，请稍候再试！",step:l.step++}})}catch(t){}e.dialog.tips_black("登录过程中发生错误，请稍候再试！")},r=t.password;r&&(l.md5_m=CryptoJS.MD5(r).toString(),t.password=l.md5_m,l.hmac_flash_ready),t.redirect_url=location.href,t.t=(new Date).getTime(),t.client_id=l.client_id,d.control.API.iframeLogin(t,o,a)},reg_old:function(t,n){var o=null,a=function(a){var r=a.result,s=0===r;if(n(s),0===r){var c=CryptoJS.MD5(t.password+a.data.s).toString();d.control._hmac(t.password,c),i.set("auth_wl",t.password,2592e3),e.dialog.tips_black("注册成功，正在登录…",2),o.destroy(),d.view.show("phone",{bdTitle:"恭喜您！注册成功"});try{DYS.submit({point_id:DYS.point.page(-6,5,1),ext:{step:l.step++}})}catch(p){}}else if(2===r){e.dialog.alert("当前ip输入验证码时错误次数过多，请等待一天后在重新尝试！");try{DYS.submit({point_id:DYS.point.page(-6,5,2),ext:{info:"当前ip输入验证码时错误次数过多，请等待一天后在重新尝试！",step:l.step++}})}catch(p){}o.refresh()}else{e.dialog.tips_black("注册失败："+a.error);try{DYS.submit({point_id:DYS.point.page(-6,5,2),ext:{info:a.error,step:l.step++}})}catch(p){}o.refresh()}},r=function(){n(!1),d.view.errorPopTip({cont:"注册过程中发生错误，请稍候再试！"});try{DYS.submit({point_id:DYS.point.page(-6,5,2),ext:{info:"注册过程中发生错误，请稍候再试！",step:l.step++}})}catch(e){}},c=t.password,p=t.password2;c&&(t.password=CryptoJS.MD5(c).toString()),p&&(t.password2=CryptoJS.MD5(p).toString()),o=s.create({lock:!0,shadow:{opacity:0},onSelectOver:function(e){t.captcha_word=e,d.control.API.reg(t,a,r);try{DYS.submit({point_id:DYS.point.page(-6,4),ext:{step:l.step++}})}catch(i){}},onHide:function(){n(!1)}})},reg:function(t,n){var o=null,a=t.password,r=t.password2;a&&(t.password=CryptoJS.MD5(a).toString()),r&&(t.password2=CryptoJS.MD5(r).toString()),a&&(l.md5_m=CryptoJS.MD5(a).toString(),t.password=l.md5_m,l.hmac_flash_ready);var c=function(t){if(0==t.error){i.set("auth_wl",l.md5_m,2592e3),d.control._hmac(l.md5_m,l.md5_h),o.destroy(),d.view.show("phone",{bdTitle:"恭喜您！注册成功"});try{DYS.submit({point_id:DYS.point.page(-5,4,1),ext:{step:l.step++}})}catch(n){}}else{e.dialog.tips_black(t.msg,1.5);try{DYS.submit({point_id:DYS.point.page(-5,4,2),ext:{step:l.step++}})}catch(n){}}},p=function(t){var i=t.error,a=0===i;if(n(a),0===i){e.dialog.tips_black("注册成功，正在登录…",2);try{DYS.submit({point_id:DYS.point.page(-6,5,1),ext:{step:l.step++}})}catch(r){}d.control.API.login(t.data,c,e.noop)}else if(2===i){e.dialog.alert("当前ip输入验证码时错误次数过多，请等待一天后在重新尝试！");try{DYS.submit({point_id:DYS.point.page(-6,5,2),ext:{info:"当前ip输入验证码时错误次数过多，请等待一天后在重新尝试！",step:l.step++}})}catch(r){}o.refresh()}else{e.dialog.tips_black("注册失败："+t.msg);try{DYS.submit({point_id:DYS.point.page(-6,5,2),ext:{info:t.msg,step:l.step++}})}catch(r){}o.refresh()}},f=function(){n(!1),e.dialog.tips_black("注册过程中发生错误，请稍候再试！");try{DYS.submit({point_id:DYS.point.page(-6,5,2),ext:{info:"注册过程中发生错误，请稍候再试！",step:l.step++}})}catch(t){}o.refresh()};o=s.create({lock:!0,shadow:{opacity:0},onSelectOver:function(i){if(t.captcha_word=i,t.redirect_url=location.href,t.client_id=l.client_id,u.val()){var n=function(e){t.cpsid=e.cpsid,d.control.API.iframeReg(t,p,f);try{DYS.submit({point_id:DYS.point.page(-6,4),ext:{step:l.step++}})}catch(i){}},o=function(){e.dialog.tips_black("注册过程中发生错误，请稍候再试！")};d.control.API.getCPS({},n,o)}else{d.control.API.iframeReg(t,p,f);try{DYS.submit({point_id:DYS.point.page(-6,4),ext:{step:l.step++}})}catch(a){}}},onHide:function(){n(!1)}})},bindphone:function(e,t){var i=d.view.$phoneform.find("#js-phone-submit").parent(),n=function(e){switch(e.result){case 0:var t="恭喜你，绑定成功！";d.view.show("member",{bdTitle:t,phoneNum:e.phone});try{DYS.submit({point_id:DYS.point.page(-6,8),ext:{step:l.step++}})}catch(n){}break;default:d.bindphone.clearTimer(),d.bindphone.initializeImgCapcha(),d.bindphone.resetText();try{DYS.submit({point_id:DYS.point.page(-6,9),ext:{info:e.error,step:l.step++}})}catch(n){}d.view.errorPopTip({cont:e.error,element:i})}},o=function(){d.bindphone.initializeImgCapcha(),d.bindphone.resetText(),d.view.errorPopTip({cont:"系统繁忙，请核定内容后再提交!",element:i});try{DYS.submit({point_id:DYS.point.page(-6,9),ext:{info:"系统繁忙，请核定内容后再提交!",step:l.step++}})}catch(e){}};d.control.API.bindPhone(e,n,o)}},d.validate={check:function(t){var i=e(t),n=i.attr("name"),o=e.trim(i.val());if(i.attr("placeholder")||i.val(o),"geetest_challenge"===n||"geetest_validate"===n||"geetest_seccode"===n)return!0;if("captcha_word"===n){if(d.view._type===l.view.type.login&&p.instance&&p.instance.isFast())return!0;if(d.view._type===l.view.type.reg)return!0}if(""===o)return d.validate._fx_err_ipt(t),!1;var a=!0;return d.view._type===l.view.type.login?"username"===n?a=d.validate._ck_login_username(t):"password"===n?a=d.validate._ck_login_password(t):"captcha_word"===n&&(a=d.validate._ck_login_captcha(t)):d.view._type===l.view.type.reg&&("nickname"===n?a=d.validate._ck_reg_nickname(t):"password"===n?a=d.validate._ck_reg_password(t):"password2"===n?a=d.validate._ck_reg_password2(t):"email"===n?a=d.validate._ck_reg_email(t):"protocol"===n&&(a=d.validate._ck_reg_protocol(t))),d.view._type===l.view.type.phone&&("bindphonenum"===n?a=d.validate._ck_phonenum(t):"phonenum_captcha"===n?a=d.validate._ck_phonenum_captcha(t):"yzphonenum"===n&&(a=d.validate._ck_yzphonenum(t))),a?(d.validate._fx_rig_ipt(t),!0):!1},ckRegNicknameAsync:function(t,i){e.getJSON("/member/register/validate/nickname_new",{data:encodeURIComponent(t.value)},function(n){var o=n.result,a=0===o;0===o?d.validate._fx_rig_ipt(t):-2===o?d.validate._showerr(n.msg,t):d.validate._showerr("用户昵称不合法或已被占用",t),e.isFunction(i)&&i(a)})},_showerr:function(e,t){d.view.errorTip({element:t,cont:e,delay:2}),d.validate._fx_err_ipt(t)},_showinfo:function(e,t){d.view.errorTip({element:t,cont:e,type:"info",delay:2})},_fx_rig_ipt:function(t){e(t).removeClass("ipt-err")},_fx_success_ipt:function(t){var i=e(t);d.view._type!==l.view.type.login&&(i.hasClass("ipt-success")||(i.is(":text")||i.is(":password"))&&(i.addClass("ipt-success"),setTimeout(function(){i.removeClass("ipt-success")},2e3)))},_fx_err_ipt:function(t){var i=e(t);i.hasClass("ipt-err")||(i.hasClass("ipt-need-parent")&&(i.parent().addClass("ipt-parent-err"),setTimeout(function(){i.parent().removeClass("ipt-parent-err")},2e3)),(i.is(":text")||i.is(":password"))&&(i.addClass("ipt-err"),setTimeout(function(){i.removeClass("ipt-err")},2e3)))},_ck_login_captcha:function(t){var i=e(t).val();return 4!=i.length?(d.validate._showerr("验证码不正确",t),!1):!0},_ck_phonenum:function(t){function i(e,t){var i=/^((13|15|18)[0-9]{9}|(176|177|178)[0-9]{8})$/;return!("0086"==e&&!i.test(t))}var n=e(t).val(),o=!!/^[^0]\d{6,}$/.test(n);if(!o)return d.validate._showerr("手机号码不正确",t),!1;var a=e.trim(d.view.$pop.find('.loginbox-bd[data-type="phone"] form .js-country-code').text());return i(a,n)===!1?(d.validate._showerr("请勿使用网络手机进行绑定",t),!1):!0},_ck_phonenum_captcha:function(t){var i=e(t).val(),n=!!/^[0-9]{4}$/.test(i);return n?!0:(d.validate._showerr("校验码格式不正确",t),!1)},_ck_yzphonenum:function(t){var i=e(t).val();return 6!=i.length?(d.validate._showerr("验证码格式不正确",t),!1):!0},_ck_login_username:function(t){var i=e(t).val();return""==i?(d.validate._showerr("用户昵称不能为空",t),!1):0===i.indexOf("_")?(d.validate._showerr("用户昵称不能以下划线开头",t),!1):!0},_ck_login_password:function(t){var i=e(t).val();return i.length<5||i.length>25?(d.validate._showerr("密码长度不正确，仅限5~25个字符",t),!1):!0},_ck_reg_nickname:function(i){var n=e(i).val();if(""==n)return d.validate._showerr("用户昵称不能为空",i),!1;if(-1!=n.indexOf("_"))return d.validate._showerr("用户昵称不能含有下划线",i),!1;var o=t.string.bytelen(n);return 5>o?(d.validate._showerr("您的昵称过短",i),!1):o>30?(d.validate._showerr("您的昵称过长",i),!1):!0},_ck_reg_password:function(e){return d.validate._ck_login_password(e)},_ck_reg_password2:function(t){var i=e(t),n=i.val(),o=i.parents("form").find("[name=password]").val();return n!==o?(d.validate._showerr("两次密码输入不一致",t),!1):!0},_ck_reg_email:function(t){var i=/^([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+.[a-zA-Z]{2,4}$/,n=e(t).val();return i.test(n)?!0:(d.validate._showerr("邮箱地址格式不正确",t),!1)},_ck_reg_protocol:function(t){var i=e(t);return i.prop("checked")?!0:(d.validate._showerr("您还没有同意注册协议",t),!1)}},d.bindphone={initializeImgCapcha:function(){var e=d.view.$pop.find('.loginbox-bd[data-type="phone"] img.phone-capimg'),t=d.view.$pop.find('.loginbox-bd[data-type="phone"] #phonenum_captcha'),i=e.attr("data-src")+"?v="+(new Date).getTime();e.attr("src",i),t.val("")},changeAreaCode:function(){var e=d.view.$pop.find('.loginbox-bd[data-type="phone"] select.js-select-country').val();d.view.$pop.find('.loginbox-bd[data-type="phone"] .js-country-code').text(e)},getPhoneData:function(){var t={bindphonenum:e.trim(d.view.$pop.find('.loginbox-bd[data-type="phone"] form #bindphonenum').val()),phonenum_captcha:e.trim(d.view.$pop.find('.loginbox-bd[data-type="phone"] form #phonenum_captcha').val()),areaCode:e.trim(d.view.$pop.find('.loginbox-bd[data-type="phone"] form .js-country-code').text()),email_captcha:""};return t},verifyPhone:function(){var e=d.view.$pop.find('.loginbox-bd[data-type="phone"] form input[name]').not("input[name=yzphonenum]"),t=d.view.$pop.find('.loginbox-bd[data-type="phone"] form .js-sendvoice'),i=!0;if(e.each(function(){return(i=d.validate.check(this))?void 0:!1}),i){var n=d.bindphone.getPhoneData(),o=function(){d.view.errorPopTip({cont:"语音验证过程发生错误，请稍候再试！",element:t})},a=function(e){switch(e.result){case 0:d.bindphone.countDown(t,60,"语音验证");break;default:d.view.errorPopTip({cont:e.error,element:t}),d.bindphone.initializeImgCapcha()}};d.control.API.verifyPhone(n,a,o)}},clearTimer:function(){d.bindphone.countTimer&&clearTimeout(d.bindphone.countTimer)},countDown:function(e,t,i){t>=0?(e.attr("disabled",!0),e.val(i+"("+t+")"),e.addClass("long"),t--,d.bindphone.countTimer=setTimeout(function(){d.bindphone.countDown(e,t,i)},1e3)):(e.removeClass("long"),e.attr("disabled",!1),e.val("重新获取"))},resetText:function(){var e=d.view.$pop.find('.loginbox-bd[data-type="phone"] form .js-sendvoice'),t=d.view.$pop.find('.loginbox-bd[data-type="phone"] form .js-phone-submit');e.attr("disabled",!1),e.val("语音验证").removeClass("long"),t.find("span").text("确认绑定")},evt:function(){d.view.$pop.find('.loginbox-bd[data-type="phone"] img.phone-capimg').click(function(e){d.bindphone.initializeImgCapcha()}),d.view.$pop.find('.loginbox-bd[data-type="phone"] select.js-select-country').change(function(e){d.bindphone.changeAreaCode()}),d.view.$pop.find('.loginbox-bd[data-type="phone"] input.js-sendvoice').click(function(e){d.view._evt_stop(e),d.bindphone.verifyPhone()}),d.view.$pop.find('.loginbox-bd[data-type="phone"] input#bindphonenum').focusin(function(t){d.view._evt_stop(t);var i=e(this).val().replace("请输入您的手机号码","");e(this).val(i)})}},p._is_init=!1,p.init=function(e){if(!p._is_init&&(!d.control.check(!0)||e)){var t=d.view.el(l.view.el.pop),i=!!t.find(".captcha").length;i&&(p._is_init=!0,p.instance=r.init(t))}};var u={check:function(){var e=i.get("ditchName");if(!e&&location.search)for(var t,n,o=location.search.replace("?","").split("&"),a=0,r=o.length;r>a;a++)if(t=o[a],n=t.split("="),"ditchName"===n[0]){i.set("ditchName",n[1],0);break}},val:function(){return i.get("ditchName")}},f={init:function(t){t=t||{},e.isFunction(t.onAuto)&&(d.control._on_auto_login=t.onAuto),d.init()},show:d.view.show,hide:d.view.hide,toggle:d.view.toggle,exitif:d.view.exitif,check:d.control.check,enter:d.view.enter,exit:d.control.exit};return window.return_loadhmOk=function(){hmac_flash_ready=!0},e(d.control._load_hmac),e(u.check),f}),define("douyu/com/user",["jquery","douyu/com/user-view"],function(e,t){try{window.user_dialog&&window.user_dialog.open_login&&(window.user_dialog._open_login=window.user_dialog.open_login,window.user_dialog.open_login=function(){e(".loginbox-shadow").size()<1&&e(".loginbox").size()<1?(t.init(),t.show("login")):t.show("login")}),window.user_dialog&&window.user_dialog.open_reg&&(window.user_dialog._open_reg=window.user_dialog.open_reg,window.user_dialog.open_reg=function(){e(".loginbox-shadow").size()<1&&e(".loginbox").size()<1?(t.init(),t.show("reg")):t.show("reg")})}catch(i){window.user_dialog&&window.user_dialog._open_login&&(window.user_dialog.open_login=window.user_dialog._open_login),window.user_dialog&&window.user_dialog._open_reg&&(window.user_dialog.open_reg=window.user_dialog._open_reg)}return t}),define("douyu/com/vcode9",["jquery","shark/class","shark/util/lang/1.0","shark/util/template/1.0","shark/ui/dragdrop/1.0","douyu/context","douyu/com/sign"],function(e,t,i,n,o,a,r){var s={src:{log:"/member/login/captcha",reg:window.passport_host+"api/regCaptcha",task:"/member/task/captcha2"},vcode9:{allowParamKeys:["onSelectOver"]},sign:null},c=[[0,0],[-55,0],[-110,0],[0,-40],[-55,-40],[-110,-40],[0,-80],[-55,-80],[-110,-80]],l=t({init:function(t){this.config=e.extend(!0,{},{sence:"reg",title:"验证码",auto:!0,lock:!1,shadow:{opacity:.7},sign:!1,onSelectOver:function(){},onShow:function(){},onHide:function(){}},t),this.render(),this.bindEvt(),this.config.auto&&this.show(),this.refresh(),this.config.sign&&(this.config.ddProxy=o.create({target:this.config.$pop,trigger:".vcode9-tit"}))},render:function(){var t=this.make(),i=e("body");this.config.$pop=e(t.pop),this.config.$shadow=e(t.shadow),this.config.$pop.hide().removeClass("hide"),this.config.$shadow.hide().removeClass("hide"),this.config.$pop.find(".vcode9-tit h3").text(this.config.title),this.config.$shadow.css({opacity:this.config.shadow.opacity,filter:"Alpha(Opacity="+100*this.config.shadow.opacity+")"}),i.append(this.config.$pop),i.append(this.config.$shadow),this.config._is_show=!1,this.config.selected=[]},make:function(){return{pop:e.trim(e("#dytemp-vcode9").html()),shadow:e.trim(e("#dytemp-vcode9-shadow").html())}},showSign:function(){var t=30010,n=a.get("room.user_best_cq"),o=e("[data-dysign="+t+"]").clone().attr({style:"","class":""});if(o.size()&&e.trim(o.html())&&!(n>0)){var c=i.string.join('<div class="vcode9-sign">','<div class="s-cdown">','<span class="closetxt"><em>0</em>s 后可关闭广告</span>','<span class="closebtn" style="">关闭</span>','<span class="cqnosign">酬勤用户免广告</span>',"</div>",'<div class="s-box"></div>',"</div>"),l=this;this.config.$sign=e(c),this.config.$pop.append(this.config.$sign),this.config.$sign.find(".s-box").empty().append(o),s.isExposured||(r.exposure(),o&&o.trigger("scroll"),s.isExposured=!0),this.config.$sign.find(".s-cdown .closebtn").one("click",function(){l.hideSign()}),this.cdownSign()}},cdownSign:function(){var e=this.config.$sign,t=this;e&&(this.config.signCount=15,e.show(),e.find(".s-cdown .closetxt em").text(5),e.find(".s-cdown .closetxt").show(),e.find(".s-cdown .closebtn").hide(),this.config.signTimer=setInterval(function(){t.config.signCount--,t.config.signCount<0&&(t.hideSign(),clearInterval(t.config.signTimer)),t.config.signCount<10?(e.find(".s-cdown .closetxt").hide(),e.find(".s-cdown .closebtn").show()):e.find(".s-cdown .closetxt em").text(t.config.signCount-10)},1e3))},hideSign:function(){this.config.$sign&&(this.config.$sign.hide(),this.config.$sign.find(".s-box").empty()),this.config.signTimer&&clearInterval(this.config.signTimer)},show:function(){var e=this;this.config.lock&&this.config.$shadow.fadeIn(),this.config.$pop.fadeIn(function(){e.config._is_show=!0,e.config.onShow(e),e.config.sign&&e.showSign()})},hide:function(){var e=this;this.config.lock&&this.config.$shadow.fadeOut(),this.config.$pop.fadeOut(function(){e.config._is_show=!1,e.config.onHide.call(e),e.config.sign&&e.hideSign()})},getCode:function(){for(var e=this.config.selected,t="",i=0,n=e.length;n>i;i++)t+=e[i].v;return t},getSrc:function(){return s.src[this.config.sence]},layout:function(){},destroy:function(){this.config.$pop.remove(),this.config.$shadow.remove()},refresh:function(){var e=this.config.$pop,t=e.find(".vcode9-preview>b").not(".p-delete"),i=this.getSrc()+"?v="+Math.random(),n="url("+i+")";this.config.selected=[],e.find(".vcode9-preview>b").not(".p-delete").css("background-image",n),e.find(".vcode9-guide>span").css("background-image",n),e.find(".vcode9-input>a>b").css("background-image",n),t.css("background-position","-500px -500px")},param:function(){var t,i=[].slice.call(arguments);e.isPlainObject(i[0])?t=i[0]:(t={},t[i[0]]=i[1]);for(var n in t)this._param(n,t[n])},pushCode:function(e){var t=this.config.selected.length,i=this.config.$pop.find(".vcode9-preview>b").not(".p-delete");t>=4||(this.config.selected.push(e),i.eq(t).css({"background-position-x":e.x+"px ","background-position-y":e.y+"px ","background-position":e.x+"px "+e.y+"px"}),t=this.config.selected.length,4===t&&this.config.onSelectOver.call(this,this.getCode()))},popCode:function(){var e=this.config.selected.length,t=this.config.$pop.find(".vcode9-preview>b").not(".p-delete");e&&(this.config.selected.pop(),t.eq(e-1).css({"background-position":"-500px -500px"}))},bindEvt:function(){function t(e){e.stopPropagation(),e.preventDefault()}var i=this;this.config.$pop.find(".p-delete").click(function(){i.popCode()}),this.config.$pop.find(".vcode9-input>a").click(function(n){t(n);var o,a,r,s=e(this),l=s.find("b"),d=parseInt(l.data("num"))||0;o=c[d],a=o[0]-3,r=o[1]-3,i.pushCode({v:d,x:a,y:r})}),this.config.$pop.find(".vcode9-close").click(function(){return i.hide(),!1}),this.config.$pop.find(".vcode9-guide>a").click(function(){return i.refresh(),!1})},_param:function(e,t){for(var i=!1,n=s.vcode9.allowParamKeys,o=0,a=n.length;a>o;o++)if(e===n[o]){i=!0;break}i&&(this.config[e]=t)}}),d={create:function(e){return new l(e)}};return d}),define("douyu/com/vcode-user",["jquery","shark/class"],function(e,t){var i={type:null,input:{codesrc:"/member/task/captcha"},fast:{idpre:"gt-captcha-",count:0}},n=t({init:function(t){this.config=e.extend(!0,{},{target:null},t),this.render(),this.bindEvt(),this.refresh()},render:function(){this.config.$tar=e(this.config.target),this.config.$el=this.config.$tar.find(".captcha"),this.config.$ipt=this.config.$el.find("input"),this.config.$img=this.config.$el.find("img")},show:function(){this.config.$el.show()},hide:function(){this.config.$el.hide()},refresh:function(){var e=passport_host+"api/captcha?v="+(new Date).getTime();this.config.$img.attr("src",e),this.config.$ipt.val("")},bindEvt:function(){var e=this;this.config.$img.click(function(t){t.stopPropagation(),t.preventDefault(),e.refresh()})}}),o=t({init:function(t){this.config=e.extend(!0,{},{target:null},t),this.render()},nextId:function(){return i.fast.idpre+ ++i.fast.count},getResult:function(){return this.config.result},check:function(t){var i=function(i){0===i.code?this.buildAsync(e.trim(i.id)):t(!1)},n=function(){t(!1)};e.ajax("/member/login/check_capcha_status",{type:"post",dataType:"json",timeout:5e3,success:e.proxy(i,this),error:e.proxy(n,this)})},render:function(){this.config.$tar=e(this.config.target),this.config.$el=this.config.$tar.find(".captcha-gt")},build:function(e){var t=this.nextId(),i=this;this.config.$el.append('<div id="'+t+'"></div>'),this.config.result=null,window.initGeetest({gt:e,product:"float"},function(e){e.appendTo("#"+t),e.onSuccess(function(){i.config.result=i.plugin.getValidate()}),e.onRefresh(function(){i.config.result=null}),e.onError(function(){i.config.result=null}),i.plugin=e})},buildAsync:function(e){var t=this,i=location.protocol;require.use([i+"//static.geetest.com/static/tools/gt.js"],function(){t.build(e)})},refresh:function(){this.plugin.refresh()},show:function(){this.config.$el.show()},hide:function(){this.config.$el.hide()}}),a={init:function(e){var t=new n({target:e}),a=new o({target:e});i.type="fast",t.hide();try{a.check(function(e){e===!1&&(i.type="input",t.show(),a.hide())})}catch(r){i.type="input",t.show(),window.console&&console.error(r)}return{refresh:function(){"input"===i.type?t.refresh():a.refresh()},isInput:function(){return"input"===i.type},isFast:function(){return"fast"===i.type},getType:function(){return i.type},getFastResult:function(){return a.getResult()}}}};return a}),define("douyu/com/sign",["jquery","shark/class","shark/util/lang/1.0","shark/util/ready/1.0","shark/util/flash/bridge/1.0","shark/util/flash/data/1.0","shark/ext/swfobject","douyu/context","douyu/com/insight"],function(e,t,i,n,o,a,r,s,c){var l=(n.create(),{sign:{id_pre:"dysign-",dom_prop:"data-dysign",render_count:0},aop:{optype:{remove:"remove"},view:"view",clean:"clean",complete:"complete"},showAdPos:[]}),d={elementSign:function(t){return e(t).attr(l.sign.dom_prop)},pageSigns:function(){var t,i=[];return e("["+l.sign.dom_prop+"]").each(function(){t=d.elementSign(this),i.push(t)}),i},innerPath:function(e){return 0===e.indexOf("http://")||0===e.indexOf("https://")?e:s.get("sys.upload_url")+e},innerLink:function(e){return e&&e.adid&&e.posid&&e.proid?i.string.format("/lapi/sign/signapi/click?roomid={0}&aid={1}&posid={2}&projid={3}",s.get("room.room_id")||0,e.adid||0,e.posid||0,e.proid||0):void 0}},p=0;try{p=$ROOM.room_id}catch(u){}var f=window._pageadvar||[],h={build:function(){var t=e("[data-dysign]");f.length&&g.response(f);var i=this.getAjaxPosList(t,f).join(",");i?g.getAjaxPosListData(i):(l.sign.render_count=0,m.completeCallback()),g.exposureAd(),g.exposureAdNew()},getAjaxPosList:function(t,i){for(var n=[],o=0,a=t.length;a>o;o++){var r=e(t[o]),s=r.attr("data-dysign")-0;if(r.attr("data-dysign-show"))l.showAdPos.push(s);else{for(var c=!1,d=0,p=i.length;p>d;d++)s==i[d].posid-0&&(c=!0);c||n.push(s)}}return n}},g={request:function(e,t){this.getAjaxPosListData(e)},response:function(e){e&&m.render(e)},_decodeFlashText:function(e){var t,n,o,a,r="ad_list@=";if(e&&!(e.indexOf(r)<0))return t=e.replace(r,"").replace(/@AAS/g,"/").split("@S"),o=[],i.each(t,function(e){e.indexOf("@AS")>=0&&(n=e.split("@AS"),a={},i.each(n,function(e){e=e.split("@AA="),e[0]&&(a[e[0]]=e[1])}),o.push(a))}),o},getAjaxPosListData:function(t){var i=this,n="/lapi/sign/signapi/getinfo";e.ajax({url:n,type:"POST",data:{posid:t,roomid:p},dataType:"json",success:function(e){0===e.error?i.response(e.data):(l.sign.render_count=0,m.completeCallback())},error:function(){l.sign.render_count=0,m.completeCallback()}})},exposureAd:function(){for(var t=[],i=0,n=l.showAdPos.length;n>i;i++){var o=e("[data-dysign="+l.showAdPos[i]+"]"),a={adid:o.attr("data-dysign-adid")||"",posid:o.attr("data-dysign")||"",proid:o.attr("data-dysign-proid")||"",roomid:p};t.push(a)}if(window._pageadvar)for(var i=0,n=_pageadvar.length;n>i;i++){var a={adid:_pageadvar[i].adid||"",posid:_pageadvar[i].posid||"",proid:_pageadvar[i].proid||"",roomid:p};t.push(a)}if(t.length){var r="/lapi/sign/signapi/setinfo";e.ajax({url:r,type:"POST",dataType:"json",data:{data:JSON.stringify(t)},success:function(e){}})}},exposureAdNew:function(){var t=[],i=[],n=null,o=500,a=0,r=0,s=null;c.build({appear:function(){t.push(e(this)),n&&clearTimeout(n),n=setTimeout(function(){for(a=0,r=t.length;r>a;a++){s=t[a];var n=s.attr("data-dysign-adid")||"",o=s.attr("data-dysign")||"",c=s.attr("data-dysign-proid")||"";""!=n&&""!=o&&""!=c&&i.push({adid:n,posid:o,proid:c,roomid:p})}if(i.length){var l="/lapi/sign/signapi/rtpv";e.ajax({url:l,type:"POST",dataType:"json",data:{data:JSON.stringify(i)},success:function(e){}}),t=[],i=[]}},o)}})}},m={render:function(e){var t,i,n,o=m.render.ways,a=o["default"];try{for(var r=0,s=e.length;s>r;r++)if(t=e[r],!(t.adid<0)){n=!1;for(var c in o)if(i=o[c],"default"!==c&&i(t)===!0){n=!0;break}n!==!0&&a(t)}}catch(d){window.console&&console.error(d)}try{m.clean()}catch(d){window.console&&console.error(d)}1===l.sign.render_count?(l.sign.render_count=0,m.completeCallback()):l.sign.render_count++,f.length||(l.sign.render_count=0,m.completeCallback())},clean:function(){var t,i,n,o,a,r=m.clean.ways,s=r["default"],c=e("["+l.sign.dom_prop+"]");c.each(function(e){t=c.eq(e),i=t.attr(l.sign.dom_prop),a=!1;for(var d in r)if(n=r[d],o={id:i,el:t.get(0)},"default"!==d&&n(o)===!0){a=!0;break}a!==!0&&s(o)})}};m.render.reg=function(e,t){"default"!==e&&(m.render.ways[e]=t)},m.render.remove=function(e){if("default"!==e){var t={},i=m.render.ways;for(var n in i)e!==n&&(t[n]=i[n]);m.render.ways=t}},m.clean.reg=function(e,t){"default"!==e&&(m.clean.ways[e]=t)},m.clean.remove=function(e){if("default"!==e){var t={},i=m.clean.ways;for(var n in i)e!==n&&(t[n]=i[n]);m.clean.ways=t}},m.render.ways={"default":function(t){var n,o,a,c,u,f=(i.string.join,i.string.format);if(t.adid&&!(t.adid<=0)&&t.srcid&&(n=f("[{0}={1}]",l.sign.dom_prop,t.posid),u=e(n),u.length)){u.empty(),u.attr({"data-dysign-adid":t.adid,"data-dysign-proid":t.proid}),a=t.link?d.innerLink(t):"",t.srcid.indexOf(".swf")>0?(c={id:l.sign.id_pre+t.posid,cover:s.get("sys.web_url")+"app/douyu/res/flash/swfcover.gif",path:d.innerPath(t.srcid),params:{wmode:"opaque",menu:"false",allowFullScreen:"false",AllowScriptAccess:"never"}},o=f('<div id="{0}"></div>',c.id)):o=f('<img src="{0}" style="width:100%;height:100%">',d.innerPath(t.srcid));var h=t&&t.ec?JSON.parse(t.ec).innerlink:0;if(c&&h-0==1){o=f('<div id="{0}"></div>',c.id),u.append(o);var g="http://"+window.location.host+"/lapi/sign/signapi/click?roomid="+p+"&aid="+t.adid+"&posid="+t.posid+"&projid="+t.proid+"&callback=1";return g=escape(g),void r.embedSWF(c.path,c.id,"100%","100%","9.0.0",null,{adcl:g},c.params)}var m=s.get("sys.web_url")+"/app/douyu/res/flash/swfcover.gif";u.is("a")?u.prop("href",a).prop("href","_blank"):o=c?f('<a href="{0}" target="_blank" style="position: relative; display: block;width: 100%;height: 100%;">{1}<img src="'+m+'" width="100%" height="100%" style="position: absolute;top: 0;left: 0;z-index: 10;" onclick="this.parentNode.click(); return false;" /></a>',a,o):f('<a href="{0}" target="_blank">{1}</a>',a,o),u.append(o),c&&r.embedSWF(c.path,c.id,"100%","100%","9.0.0",null,null,c.params)}}},m.clean.ways={"default":function(e){}},m.completeCallback=function(){};var v=function(t){var i=[].slice.call(arguments,1);t===l.aop.view&&(i[0]===l.aop.optype.remove?m.render.remove(i[1]):m.render.reg(i[0],i[1])),t===l.aop.clean&&(i[0]===l.aop.optype.remove?m.clean.remove(i[1]):m.clean.reg(i[0],i[1])),t===l.aop.complete&&(m.completeCallback=e.isFunction(i[0])?i[0]:m.completeCallback)};return{request:function(e){g.request(e)},requestPage:function(){h.build()},exposure:function(){g.exposureAdNew()},response:g.response,helper:{innerPath:d.innerPath,innerLink:d.innerLink,defview:m.render.ways["default"]},aop:v}}),define("douyu/com/avatar",["jquery","shark/observer","shark/util/lang/1.0","douyu/context","shark/util/cookie/1.0"],function(e,t,i,n,o){function a(t,i,n){var o=u[t];e.isPlainObject(o)||(u[t]={}),u[t][i]=n}function r(e,t){var i=u[e];return i?i[t]:""}function s(t,n,r){var s=o.get("avatar");if(s)return"_"==s.charAt(s.length-1)&&(s+=n+".jpg"),"="==s.charAt(s.length-1)&&(s+=n),r&&r(s),s;var c="";return e.ajax({url:i.string.format("/lapi/member/userInfo/getInfo/{0}?size={1}&icon={2}",t,n,1),type:"get",dataType:"json",success:function(e){if(0===e.error)if(e.data.icon)if(0==e.data.icon.code){c=i.string.format("{0}upload/{1}",d,e.data.icon.msg);var s=-1,l="";-1!=c.indexOf("_small.jpg")?s=c.indexOf("_small.jpg"):-1!=c.indexOf("_middle.jpg")?s=c.indexOf("_middle.jpg"):-1!=c.indexOf("_big.jpg")?s=c.indexOf("_big.jpg"):-1!=c.indexOf("size=")&&(s=c.indexOf("size=")+4),-1!=s&&(l=c.substring(0,s+1),o.set("avatar",l,0)),a(t,n,c)}else c=p;else c=p;else c=p;r&&r(c)},error:function(){c=p,r&&r(c)}}),c}function c(t,n,o){var r="";return e.ajax({url:i.string.format("{0}lapi/member/avatar/getAvatar?uid={1}&size={2}","/",t,n),type:"get",success:function(e){e?(r=i.string.format("{0}upload/{1}",d,e),a(t,n,r)):r=p,o&&o(r)},error:function(e){r=p,o&&o(r)}}),r}var l=n.get("sys.res_url"),d=n.get("sys.avatar_url"),p=l+"douyu/images/defaultAvatar.png?20160303",u={};t.on("douyu.avatar.get",function(e,t,i){var n;return d&&e?(t=t||"small",(n=r(e,t))?(i&&i(n),n):n=$SYS.uid==e?s(e,t,i):c(e,t,i)):(i&&i(p),p)})}),define("douyu/page/lives/mod/dp",["jquery"],function(e){function t(e){return e?e.indexOf("#")>-1||e.indexOf("javascript")>-1?"":e.substring(e.lastIndexOf("/")+1):""}var i=[{target:"#change-live-new-show",events:"mousedown",config:{point_id:"2.1.1.0"}},{target:"#live-new-show-content-box li:not([data-ranktype]) a",events:"mousedown",config:{point_id:"2.1.2.0",ext:{handle:function(e){var i=e.attr("href"),n=t(i),o=[];o.push(e.closest("li").index()+1),this.roomId=n,this.position=o.join(".")}}}},{target:".player_zb .title li a",events:"mousedown",config:{point_id:"2.2.1.0",ext:{handle:function(t){this.reqUrl=t.attr("data-href"),this.tag=e.trim(t.text())}}}},{target:"#live-list-contentbox li a",events:"mousedown",config:{point_id:"2.2.2.0",ext:{handle:function(e){var i=e.attr("href"),n=t(i),o=[];o.push(e.closest("li").index()+1),this.roomId=n,this.position=o.join(".")}}}},{target:"#J-pager a",events:"mousedown",config:{point_id:"2.2.3.1",ext:{handle:function(t){var i=window.location.href,n=e.trim(t.parent().find(".current").text()),o=e.trim(t.parent().find(".jumptxt").val());this.page=isNaN(e.trim(t.text()))?t.hasClass("shark-pager-next")?parseInt(n)+1:t.hasClass("shark-pager-prev")?parseInt(n)-1:t.hasClass("shark-pager-submit")?o:null:e.trim(t.text()),this.reqUrl=i+"?isAjax=0&page="+this.page}}}}];return{init:function(){e.each(i,function(t,i){e(document).on(i.events,i.target,function(){var t=e.extend(!0,{},i),n=t.config?t.config.ext:null,o=e(this);n&&n.handle&&(n.handle(o),delete n.handle),DYS.submit(t.config)})})}}}),define("douyu/page/lives/app",["jquery","shark/observer","shark/util/cookie/1.0","douyu/context","douyu/com/left","douyu/com/imgp","douyu/com/header","douyu/com/user","douyu/com/sign","vcss!shark/ui/pager/2.0","douyu/com/avatar","douyu/com/zoom","douyu/page/lives/mod/dp","douyu/com/insight"],function(e,t,i,n,o,a,r,s,c,l,d,p,u,f){var h=function(){var t=r.init({onLogin:function(){s.show("login")},onReg:function(){s.show("reg")},onExit:function(){s.exit()}});s.init({onAuto:function(e){e&&t.login()}}),a.build({container:"#mainbody"});var i=0;c.aop("clean","two-img",function(t){var n=t.id,o=e(t.el),a=e.trim(o.html());7!=n&&8!=n||a||i++,2===i&&(e("#main-col .lol-ad").remove(),i=-1)}),e.fn.placeholder&&e("input[placeholder]").each(function(){"password"!==this.type&&e(this).placeholder()}),u.init(),c.requestPage()},g={vars:{prop:"data-ranktype",propd:"data-ranktypedata",propc:"data-cid",propr:"data-rid"},show:function(){if(window.DYS){var t,i,n,o,a,r=m.currentPageIndex||1;e("#mainbody li["+g.vars.prop+"]");e("#live-new-show-content-box").size()>0&&f.build({selectors:"#live-new-show-content-box ["+g.vars.prop+"]",container:"#live-new-show-content-box",appear:function(){var s=e(this);t=s.attr(g.vars.propr),t||(t=s.find("a").attr("href").replace("/","")),i=s.attr(g.vars.prop),o=s.index(),a=s.attr(g.vars.propc),n={rid:t,rt:i,tid:a,pg:r,idx:o},s.data(g.vars.propd,n),n=e.extend(!0,{},n,{at:"show"}),DYS.submit({point_id:DYS.point.page(3),ext:n})}}),f.build({selectors:"#live-list-content ["+g.vars.prop+"]",container:"#mainbody",appear:function(){var s=e(this);t=s.attr(g.vars.propr),t||(t=s.find("a").attr("href").replace("/","")),i=s.attr(g.vars.prop),o=s.index(),a=s.attr(g.vars.propc),n={rid:t,rt:i,tid:a,pg:r,idx:o},s.data(g.vars.propd,n),n=e.extend(!0,{},n,{at:"show"}),DYS.submit({point_id:DYS.point.page(3),ext:n})}})}},bindEvt:function(){window.DYS&&e("#mainbody").on("mousedown","li[data-ranktype] a",function(t){var i=e(this).parent().data(g.vars.propd);i&&(i.at="click",DYS.submit({point_id:DYS.point.page(3),ext:i}))})}},m={getDoms:function(){this.doms={changeLiveNewShowBtn:e("#change-live-new-show"),changeLiveNewShowBox:e("#live-new-show-content-box"),liveListContent:e("#live-list-content"),liveListTypeBtn:e("[data-live-list-type]"),liveListContentBox:e("#live-list-contentbox"),tseContent:e("#main-col").find(".tse-content"),newShowTitle:e("#change-live-new-show").siblings(".real-dycj"),tagOpenBtn:e("#tag_open_btn"),tagBorder:e(".titlebotborder"),tagBorderWrap:e(".titlebotbordermore"),
tagListContent:e("#js_item_tag").find(".tag_list ul"),mainBody:e("#mainbody"),leftBody:e("#left"),body:e("body"),allTypeBtn:e('[data-live-list-type="all"]'),nonemsg:e(".nonemsg")}},init:function(){this.getDoms(),this.Pager=l,this.changeLiveNewShowClickNum=0,this.mainBodyMarginLeft=parseInt(this.doms.mainBody.css("marginLeft"),10),this.leftBodyWidth=this.doms.leftBody.width(),this.HEADHEIGHT=50;var e=document.documentElement.clientHeight||document.body.clientHeight;this.doms.mainBody.height(e-51),this.doms.nonemsg.length&&(this.doms.liveListContent.css("overflow","hidden"),this.doms.liveListContentBox.width(2e4)),this.createPager(),this.setLiveHeight(),this.checkBodyHeight(),this.fitListNone(),this.fitTagList(),this.livePageInterfaceConfig(),this.bigDataRecommend(),this.addEvent()},halfRandomRatio:function(){var e=[!0,!1],t=Math.floor(Math.random()*e.length);return e[t]},bigDataRecommend:function(){var e=this,t=i.get("uid"),n=e.doms.changeLiveNewShowBox.length;if(t&&n&&e.halfRandomRatio()){var o={url:e.getLiveNewShowList,data:{uid:t,bzdata:1}};this.getData(o,function(t){e.listRecommend(t),a.build({container:"#mainbody"}),e.resizeListNewbie(e.getliveListConfig()),g.show()})}},listRecommend:function(e){var t=this,i="";e=JSON.parse(e),i=t.getNewShowList(e),t.doms.newShowTitle.text(e.title),t.doms.changeLiveNewShowBox.html(i)},getNewShowList:function(e){for(var t=0,i="",n="",o=e.bzdata,a=e.room.length;a>t;t++)n=o?'<li data-ranktype="6" data-cid="'+e.room[t].cateid+'" data-rid="'+e.room[t].roomid+'"><a href="/'+e.room[t].roomid+'" title="'+e.room[t].roomname+'"><span class="imgbox"><b></b><i class="black"></i><img data-original="'+e.room[t].pic+'" src="http://shark.douyucdn.cn/app/douyu/res/page/list-item-def-thumb.gif"></span><div class="mes"><div class="mes-tit"><h3 class="ellipsis">'+e.room[t].roomname+'</h3><span class="tag ellipsis">'+e.room[t].gamename+'</span></div><p><span class="dy-name ellipsis fl">'+e.room[t].nickname+"</span></p></div></a></li>":'<li data-cid="'+e.room[t].cateid+'" data-rid="'+e.room[t].roomid+'"><a href="/'+e.room[t].roomid+'" title="'+e.room[t].roomname+'"><span class="imgbox"><b></b><i class="black"></i><img data-original="'+e.room[t].pic+'" src="http://shark.douyucdn.cn/app/douyu/res/page/list-item-def-thumb.gif"></span><div class="mes"><div class="mes-tit"><h3 class="ellipsis">'+e.room[t].roomname+'</h3><span class="tag ellipsis">'+e.room[t].gamename+'</span></div><p><span class="dy-name ellipsis fl">'+e.room[t].nickname+"</span></p></div></a></li>",i+=n;return i},isBigData:function(){return"斗鱼推荐"===this.doms.newShowTitle.text()?0:1},livePageInterfaceConfig:function(){this.getLiveNewShowList="/member/recommlist/getfreshlistajax",this.getLiveTypeData=location.href.split("/")[1],this.oldLiveTypeData=this.getLiveTypeData},getData:function(t,i){var n={url:t.url||"",type:t.type||"GET",data:t.data||{},success:function(e){i&&i(e)}};t.jsonp&&(n.jsonp=t.jsonp,n.callback=t.jsonCallBack),e.ajax(n)},getliveListConfig:function(){var e=this.doms.liveListContent.width(),t=e/Math.ceil(e/332)-10,i=t-2,n=i/16*9,o=n/2-35,a=i/2-24;return{liveListContentWidth:e,li_width:t,img_width:i,img_height:n,top:o,left:a}},resizeList:function(t){var i=this.doms,n=i.tseContent,o=e("#live-loading"),a=e("#resizeListStyle"),r='<style type="text/css">#live-list-content li{width:'+t.li_width+"px;}#live-list-content li img{height:"+t.img_height+"px;}#live-list-content li .shadow{width:"+t.img_width+"px;height:"+t.img_height+"px;}#live-list-content li .iconPlay{left:"+t.left+"px;}</style>";a.length?a.html(r):e('<div id="resizeListStyle" style="display: none  ">'+r+"</div>").appendTo("body"),o.length&&o.remove(),"hidden"===n.css("visibility")&&"1"!=n.css("opacity")&&(n.css({visibility:"visible"}),n.fadeTo(400,1))},resizeListNewbie:function(t){var i=this.doms,n=i.changeLiveNewShowBox;return n.length<1?!1:(n.find("li").each(function(){e(this).width(t.li_width),e(this).find("img").height(t.img_height),e(this).find(".shadow").width(t.img_width).height(t.img_height),e(this).find(".iconPlay").css({left:t.left})}),n.css({height:n.find("li").eq(0).outerHeight(!0)+"px",overflow:"hidden",position:"relative"}),void n.trigger("scroll"))},setLiveHeight:function(){var t=(function(){var t=e("#elem-mimiko-test"),i=e(window).width()||e(document).width(),n=i-parseInt(t.css("padding-left"))-parseInt(t.css("padding-right"))-e("#left_col").width();t.css({width:n})}(),this.getliveListConfig());this.resizeList(t),this.resizeListNewbie(t)},fitListNone:function(){function t(e,t,i,n){if(!(i.length<n)){if(t()>=e+30)return void i.eq(n-1).hide();i.eq(n).show(),arguments.callee(e,t,i,++n)}}var i=e("#item_data_rec"),n=i.find("li"),o=i.width(),a=i.height(),r=o/Math.ceil(o/332)-10,s=0,c=r-2,l=c/16*9,d=c/2-24,p=e(window).width()/1920;e(".nonemsg").css("font-size",45*p+"px"),n.each(function(t,i){var n=e(this);n.width(r),n.find("img").width(c).height(l),n.find(".shadow").width(c).height(l),n.find(".iconPlay").css({left:d})}),n.hide(),a>s&&t(n.outerHeight(),function(){return i.height()},n,0)},fitTagList:function(){var t=this.doms,i=t.tagOpenBtn,n=t.tagBorder,o=t.tagBorderWrap,a=t.tagListContent.find("li"),r=t.changeLiveNewShowBox.length,s=0;if(o.hide(),r&&e("#main-col .title .real-title").css({"margin-top":"0px"}),a.size()>1){for(var c=2,l=a.length;l>c;c++)if(s=a[c].offsetLeft-a[c-1].offsetLeft,0>s)return n.hide(),o.show(),i.show(),void i.siblings().show();n.show(),o.show().hide(),i.hide(),i.siblings().hide()}},addEvent:function(){var n=this,r=this.doms;e(window).resize(function(){t.trigger("mod.layout.screen.change"),n.setLiveHeight(),n.fitListNone();var e=document.documentElement.clientHeight||document.body.clientHeight;n.doms.mainBody.height(e-51),n.fitTagList()}),r.tagOpenBtn.on("click",function(){36!==r.tagListContent.height()?(r.tagListContent.height("36px"),r.tagOpenBtn.find("span").html("更多<i></i>"),r.tagOpenBtn.find("i").removeClass("open"),e(window).resize()):(r.tagListContent.height("100%"),r.tagOpenBtn.find("span").html("收起<i></i>"),r.tagOpenBtn.find("i").addClass("open"),e(window).resize())}),r.changeLiveNewShowBtn.on("click",function(){var e=n.isBigData(),t={url:n.getLiveNewShowList,data:{clickNum:++n.changeLiveNewShowClickNum}},o=i.get("uid");o?(t.data.uid=o,t.data.bzdata=e):t.data.bzdata=0,n.getData(t,function(e){n.listRecommend(e),a.build({container:"#mainbody"}),n.resizeListNewbie(n.getliveListConfig()),g.show()})}),r.liveListTypeBtn.on("click",function(t){var i=t||window.event;i.preventDefault(),i.stopPropagation();var o=e(this);r.liveListTypeBtn.removeClass("lihover"),o.addClass("lihover"),n.getLiveTypeData=o.attr("data-href"),n.pageTotal=o.attr("data-pagecount"),n.getLiveListType()}),o.onToggle(function(t){var i=n.leftBodyWidth-r.leftBody.width(),o=n.mainBodyMarginLeft-i;"close"==t?r.mainBody.css("marginLeft",o):r.mainBody.css("marginLeft",o),n.leftBodyWidth=r.leftBody.width(),n.mainBodyMarginLeft=o,n.setLiveHeight(),n.fitTagList(),n.fitListNone(),e(window).resize()})},getLiveListType:function(t){var i=this,n={url:i.getLiveTypeData,data:{page:t||1,isAjax:"1"}};i.getData(n,function(t){t?(i.doms.liveListContentBox.html(t),i.oldLiveTypeData!=i.getLiveTypeData&&i.createPager(),e("#mainbody").scrollTop(0),i.oldLiveTypeData=i.getLiveTypeData,g.show()):i.doms.liveListContentBox.html(t),i.checkBodyHeight(),a.build({container:"#mainbody"}),i.setLiveHeight()})},checkBodyHeight:function(){var e=document.documentElement.clientHeight||document.body.clientHeight;this.doms.mainBody.css("height",e-this.HEADHEIGHT-2)},createPager:function(){var t=1,i=this.pageTotal||this.doms.allTypeBtn.attr("data-pagecount")||n.get("page").pager.count||1,o=this;this.Pager.create({target:"#J-pager",totalPage:parseInt(i,10),currentIndex:parseInt(t,10),url:"",showNum:{enable:1,size:9},showPrevAndNext:1,showForm:1,clickCallBack:function(e){m.currentPageIndex=e,o.getLiveListType(e)},wrongPageCall:function(){e.dialog.tips_black("请输入正确的页码！")}})}};e(function(){h(),m.init(),g.bindEvt(),g.show()})});